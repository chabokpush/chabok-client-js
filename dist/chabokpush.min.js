/*! chabokpush - 1.4.0 | (c) 2017, 2019  ADP digital | ISC | http://chabokpush.com/ */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("chabokpush",[],t):"object"==typeof exports?exports.chabokpush=t():e.chabokpush=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=57)}([function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){g&&p&&(g=!1,p.length?d=p.concat(d):b=-1,d.length&&a())}function a(){if(!g){var e=i(s);g=!0;for(var t=d.length;t;){for(p=d,d=[];++b<t;)p&&p[b].run();b=-1,t=d.length}p=null,g=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,f,h=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var p,d=[],g=!1,b=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new u(e,t)),1!==d.length||g||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,n){"use strict";function r(e){return"[object Array]"===k.call(e)}function i(e){return"[object ArrayBuffer]"===k.call(e)}function o(e){return"undefined"!=typeof FormData&&e instanceof FormData}function s(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function a(e){return"string"==typeof e}function u(e){return"number"==typeof e}function c(e){return void 0===e}function l(e){return null!==e&&"object"==typeof e}function f(e){return"[object Date]"===k.call(e)}function h(e){return"[object File]"===k.call(e)}function p(e){return"[object Blob]"===k.call(e)}function d(e){return"[object Function]"===k.call(e)}function g(e){return l(e)&&d(e.pipe)}function b(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function y(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function v(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function m(e,t){if(null!==e&&void 0!==e)if("object"!=typeof e&&(e=[e]),r(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function _(){function e(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=_(t[n],e):t[n]=e}for(var t={},n=0,r=arguments.length;n<r;n++)m(arguments[n],e);return t}function w(e,t,n){return m(t,function(t,r){e[r]=n&&"function"==typeof t?S(t,n):t}),e}var S=n(28),E=n(72),k=Object.prototype.toString;e.exports={isArray:r,isArrayBuffer:i,isBuffer:E,isFormData:o,isArrayBufferView:s,isString:a,isNumber:u,isObject:l,isUndefined:c,isDate:f,isFile:h,isBlob:p,isFunction:d,isStream:g,isURLSearchParams:b,isStandardBrowserEnv:v,forEach:m,merge:_,extend:w,trim:y}},function(e,t,n){"use strict";var r=n(11);e.exports=function(e){if(!r(e))throw new TypeError("Cannot use null or undefined");return e}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return s(e,t,n)}var o=n(22),s=o.Buffer;s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?e.exports=o:(r(o,t),t.Buffer=i),r(s,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return s(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=s(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";e.exports=n(58)()?Symbol:n(59)},function(e,t,n){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t,n){"use strict";var r,i=n(19),o=n(26),s=n(65),a=n(27);r=e.exports=function(e,t){var n,r,s,u,c;return arguments.length<2||"string"!=typeof e?(u=t,t=e,e=null):u=arguments[2],null==e?(n=s=!0,r=!1):(n=a.call(e,"c"),r=a.call(e,"e"),s=a.call(e,"w")),c={value:t,configurable:n,enumerable:r,writable:s},u?i(o(u),c):c},r.gs=function(e,t,n){var r,u,c,l;return"string"!=typeof e?(c=n,n=t,t=e,e=null):c=arguments[3],null==t?t=void 0:s(t)?null==n?n=void 0:s(n)||(c=n,n=void 0):(c=t,t=n=void 0),null==e?(r=!0,u=!1):(r=a.call(e,"c"),u=a.call(e,"e")),l={get:t,set:n,configurable:r,enumerable:u},c?i(o(c),l):l}},function(e,t,n){"use strict";function r(e){console&&console.warn}function i(){i.init.call(this)}function o(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function s(e,t,n,i){var s,a,u;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(a=e._events,void 0===a?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),u=a[t]),void 0===u)u=a[t]=n,++e._eventsCount;else if("function"==typeof u?u=a[t]=i?[n,u]:[u,n]:i?u.unshift(n):u.push(n),(s=o(e))>0&&u.length>s&&!u.warned){u.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=u.length,r(c)}return e}function a(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,b(this.listener,this.target,e))}function u(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=a.bind(r);return i.listener=n,r.wrapFn=i,i}function c(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?p(i):f(i,i.length)}function l(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function h(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function p(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}var d,g="object"==typeof Reflect?Reflect:null,b=g&&"function"==typeof g.apply?g.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};d=g&&"function"==typeof g.ownKeys?g.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var y=Number.isNaN||function(e){return e!==e};e.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var v=10;Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return v},set:function(e){if("number"!=typeof e||e<0||y(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");v=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||y(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return o(this)},i.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=i[e];if(void 0===a)return!1;if("function"==typeof a)b(a,this,t);else for(var u=a.length,c=f(a,u),n=0;n<u;++n)b(c[n],this,t);return!0},i.prototype.addListener=function(e,t){return s(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return s(this,e,t,!0)},i.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,u(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,u(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,r,i,o,s;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():h(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},i.prototype.listeners=function(e){return c(this,e,!0)},i.prototype.rawListeners=function(e){return c(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):l.call(e,t)},i.prototype.listenerCount=l,i.prototype.eventNames=function(){return this._eventsCount>0?d(this._events):[]}},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);c.call(this,e),l.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||s.nextTick(o,this)}function o(e){e.end()}var s=n(12),a=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=r;var u=n(13);u.inherits=n(5);var c=n(34),l=n(38);u.inherits(r,c);for(var f=a(l.prototype),h=0;h<f.length;h++){var p=f[h];r.prototype[p]||(r.prototype[p]=l.prototype[p])}Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),r.prototype._destroy=function(e,t){this.push(null),this.end(),s.nextTick(t,e)}},function(e,t,n){"use strict";var r=n(25)();e.exports=function(e){return e!==r&&null!==e}},function(e,t,n){"use strict";(function(t){function n(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,i)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return t.nextTick(function(){e.apply(null,o)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:n}:e.exports=t}).call(t,n(0))},function(e,t,n){(function(e){function n(e){return Array.isArray?Array.isArray(e):"[object Array]"===b(e)}function r(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function s(e){return"number"==typeof e}function a(e){return"string"==typeof e}function u(e){return"symbol"==typeof e}function c(e){return void 0===e}function l(e){return"[object RegExp]"===b(e)}function f(e){return"object"==typeof e&&null!==e}function h(e){return"[object Date]"===b(e)}function p(e){return"[object Error]"===b(e)||e instanceof Error}function d(e){return"function"==typeof e}function g(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function b(e){return Object.prototype.toString.call(e)}t.isArray=n,t.isBoolean=r,t.isNull=i,t.isNullOrUndefined=o,t.isNumber=s,t.isString=a,t.isSymbol=u,t.isUndefined=c,t.isRegExp=l,t.isObject=f,t.isDate=h,t.isError=p,t.isFunction=d,t.isPrimitive=g,t.isBuffer=e.isBuffer}).call(t,n(22).Buffer)},function(e,t,n){t=e.exports=n(34),t.Stream=t,t.Readable=t,t.Writable=n(38),t.Duplex=n(10),t.Transform=n(40),t.PassThrough=n(99)},function(e,t,n){"use strict";e.exports=n(43)()?Object.setPrototypeOf:n(44)},function(e,t,n){"use strict";var r=Object.prototype.toString,i=r.call(function(){return arguments}());e.exports=function(e){return r.call(e)===i}},function(e,t,n){"use strict";var r=Object.prototype.toString,i=r.call("");e.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||r.call(e)===i)||!1}},function(e,t,n){"use strict";function r(){p=!1}function i(e){if(!e)return void(f!==g&&(f=g,r()));if(e!==f){if(e.length!==g.length)throw new Error("Custom alphabet for shortid must be "+g.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter(function(e,t,n){return t!==n.lastIndexOf(e)});if(t.length)throw new Error("Custom alphabet for shortid must be "+g.length+" unique characters. These characters were not unique: "+t.join(", "));f=e,r()}}function o(e){return i(e),f}function s(e){d.seed(e),h!==e&&(r(),h=e)}function a(){f||i(g);for(var e,t=f.split(""),n=[],r=d.nextValue();t.length>0;)r=d.nextValue(),e=Math.floor(r*t.length),n.push(t.splice(e,1)[0]);return n.join("")}function u(){return p||(p=a())}function c(e){return u()[e]}function l(){return f||g}var f,h,p,d=n(160),g="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";e.exports={get:l,characters:o,seed:s,lookup:c,shuffled:u}},function(e,t,n){"use strict";e.exports=n(60)()?Object.assign:n(61)},function(e,t,n){"use strict";(function(t){function r(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var i=n(1),o=n(74),s={"Content-Type":"application/x-www-form-urlencoded"},a={adapter:function(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(29):void 0!==t&&(e=n(29)),e}(),transformRequest:[function(e,t){return o(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};a.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(e){a.headers[e]={}}),i.forEach(["post","put","patch"],function(e){a.headers[e]=i.merge(s)}),e.exports=a}).call(t,n(0))},function(e,t){function n(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)r.call(n,i)&&(e[i]=n[i])}return e}e.exports=n;var r=Object.prototype.hasOwnProperty},function(e,t,n){"use strict";(function(e){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return s(this,e,t,n)}function s(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(e,t,n,r):"string"==typeof t?l(e,t,n):p(e,t)}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,n,r){return a(t),t<=0?i(e,t):void 0!==n?"string"==typeof r?i(e,t).fill(n,r):i(e,t).fill(n):i(e,t)}function c(e,t){if(a(t),e=i(e,t<0?0:0|d(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function l(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|b(t,n);e=i(e,r);var s=e.write(t,n);return s!==r&&(e=e.slice(0,s)),e}function f(e,t){var n=t.length<0?0:0|d(t.length);e=i(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=f(e,t),e}function p(e,t){if(o.isBuffer(t)){var n=0|d(t.length);return e=i(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||$(t.length)?i(e,0):f(e,t);if("Buffer"===t.type&&Q(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function g(e){return+e!=e&&(e=0),o.alloc(+e)}function b(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Y(e).length;default:if(r)return H(e).length;t=(""+t).toLowerCase(),r=!0}}function y(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return j(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return P(this,t,n);case"latin1":case"binary":return C(this,t,n);case"base64":return I(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:_(e,t,n,r,i);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):_(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function _(e,t,n,r,i){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,a=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,n/=2}var c;if(i){var l=-1;for(c=n;c<a;c++)if(o(e,c)===o(t,-1===l?0:c-l)){if(-1===l&&(l=c),c-l+1===u)return l*s}else-1!==l&&(c-=c-l),l=-1}else for(n+u>a&&(n=a-u),c=n;c>=0;c--){for(var f=!0,h=0;h<u;h++)if(o(e,c+h)!==o(t,h)){f=!1;break}if(f)return c}return-1}function w(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function S(e,t,n,r){return V(H(t,e.length-n),e,n,r)}function E(e,t,n,r){return V(z(t),e,n,r)}function k(e,t,n,r){return E(e,t,n,r)}function x(e,t,n,r){return V(Y(t),e,n,r)}function O(e,t,n,r){return V(G(t,e.length-n),e,n,r)}function I(e,t,n){return 0===t&&n===e.length?X.fromByteArray(e):X.fromByteArray(e.slice(t,n))}function T(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=n){var u,c,l,f;switch(a){case 1:o<128&&(s=o);break;case 2:u=e[i+1],128==(192&u)&&(f=(31&o)<<6|63&u)>127&&(s=f);break;case 3:u=e[i+1],c=e[i+2],128==(192&u)&&128==(192&c)&&(f=(15&o)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(s=f);break;case 4:u=e[i+1],c=e[i+2],l=e[i+3],128==(192&u)&&128==(192&c)&&128==(192&l)&&(f=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(s=f)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=a}return A(r)}function A(e){var t=e.length;if(t<=Z)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Z));return n}function P(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function j(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=F(e[o]);return i}function R(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function M(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,n,r,i,s){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function U(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function L(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function D(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(e,t,n,r,i){return i||D(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(e,t,n,r,23,4),n+4}function q(e,t,n,r,i){return i||D(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(e,t,n,r,52,8),n+8}function W(e){if(e=K(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function K(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function H(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function z(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function G(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function Y(e){return X.toByteArray(W(e))}function V(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function $(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var X=n(91),J=n(92),Q=n(35);t.Buffer=o,t.SlowBuffer=g,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return s(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return u(null,e,t,n)},o.allocUnsafe=function(e){return c(null,e)},o.allocUnsafeSlow=function(e){return c(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,s=Math.min(n,r);i<s;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},o.byteLength=b,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):y.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,r,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var s=i-r,a=n-t,u=Math.min(s,a),c=this.slice(r,i),l=e.slice(t,n),f=0;f<u;++f)if(c[f]!==l[f]){s=c[f],a=l[f];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return S(this,e,t,n);case"ascii":return E(this,e,t,n);case"latin1":case"binary":return k(this,e,t,n);case"base64":return x(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=o.prototype;else{var i=t-e;r=new o(i,void 0);for(var s=0;s<i;++s)r[s]=this[s+e]}return r},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUInt8=function(e,t){return t||M(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||M(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||M(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||M(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||M(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||M(e,4,this.length),J.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||M(e,4,this.length),J.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||M(e,8,this.length),J.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||M(e,8,this.length),J.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){N(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){N(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):L(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);N(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);N(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):L(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return q(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return q(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,s=r-n;if(this===e&&n<t&&t<r)for(i=s-1;i>=0;--i)e[i+t]=this[i+n];else if(s<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var s;if("number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{var a=o.isBuffer(e)?e:H(new o(e,r).toString()),u=a.length;for(s=0;s<n-t;++s)this[s+t]=a[s%u]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,n(3))},function(e,t,n){"use strict";var r,i=n(41),o=n(19),s=n(7),a=n(2),u=n(8),c=n(118),l=n(6),f=Object.defineProperty,h=Object.defineProperties;e.exports=r=function(e,t){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");h(this,{__list__:u("w",a(e)),__context__:u("w",t),__nextIndex__:u("w",0)}),t&&(s(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))},delete r.prototype.constructor,h(r.prototype,o({_next:u(function(){var e;if(this.__list__)return this.__redo__&&void 0!==(e=this.__redo__.shift())?e:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:u(function(){return this._createResult(this._next())}),_createResult:u(function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:u(function(e){return this.__list__[e]}),_unBind:u(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:u(function(){return"[object "+(this[l.toStringTag]||"Object")+"]"})},c({_onAdd:u(function(e){if(!(e>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return void f(this,"__redo__",u("c",[e]));this.__redo__.forEach(function(t,n){t>=e&&(this.__redo__[n]=++t)},this),this.__redo__.push(e)}}),_onDelete:u(function(e){var t;e>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(t=this.__redo__.indexOf(e),-1!==t&&this.__redo__.splice(t,1),this.__redo__.forEach(function(t,n){t>e&&(this.__redo__[n]=--t)},this)))}),_onClear:u(function(){this.__redo__&&i.call(this.__redo__),this.__nextIndex__=0})}))),f(r.prototype,l.iterator,u(function(){return this}))},function(e,t,n){"use strict";function r(e,t){function n(n){t.rejectUnauthorized&&e.emit("error",n),r.end()}var r;return t.port=t.port||8883,t.host=t.hostname||t.host||"localhost",t.rejectUnauthorized=!1!==t.rejectUnauthorized,delete t.path,r=i.connect(t),r.on("secureConnect",function(){t.rejectUnauthorized&&!r.authorized?r.emit("error",new Error("TLS not authorized")):r.removeListener("error",n)}),r.on("error",n),r}var i=n(151);e.exports=r},function(e,t,n){"use strict";e.exports=function(){}},function(e,t,n){"use strict";var r=n(11),i=Array.prototype.forEach,o=Object.create,s=function(e,t){var n;for(n in e)t[n]=e[n]};e.exports=function(e){var t=o(null);return i.call(arguments,function(e){r(e)&&s(Object(e),t)}),t}},function(e,t,n){"use strict";e.exports=n(66)()?String.prototype.contains:n(67)},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";(function(t){var r=n(1),i=n(75),o=n(77),s=n(78),a=n(79),u=n(30),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(80);e.exports=function(e){return new Promise(function(l,f){var h=e.data,p=e.headers;r.isFormData(h)&&delete p["Content-Type"];var d=new XMLHttpRequest,g="onreadystatechange",b=!1;if("test"===t.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in d||a(e.url)||(d=new window.XDomainRequest,g="onload",b=!0,d.onprogress=function(){},d.ontimeout=function(){}),e.auth){var y=e.auth.username||"",v=e.auth.password||"";p.Authorization="Basic "+c(y+":"+v)}if(d.open(e.method.toUpperCase(),o(e.url,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d[g]=function(){if(d&&(4===d.readyState||b)&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var t="getAllResponseHeaders"in d?s(d.getAllResponseHeaders()):null,n=e.responseType&&"text"!==e.responseType?d.response:d.responseText,r={data:n,status:1223===d.status?204:d.status,statusText:1223===d.status?"No Content":d.statusText,headers:t,config:e,request:d};i(l,f,r),d=null}},d.onerror=function(){f(u("Network Error",e,null,d)),d=null},d.ontimeout=function(){f(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",d)),d=null},r.isStandardBrowserEnv()){var m=n(81),_=(e.withCredentials||a(e.url))&&e.xsrfCookieName?m.read(e.xsrfCookieName):void 0;_&&(p[e.xsrfHeaderName]=_)}if("setRequestHeader"in d&&r.forEach(p,function(e,t){void 0===h&&"content-type"===t.toLowerCase()?delete p[t]:d.setRequestHeader(t,e)}),e.withCredentials&&(d.withCredentials=!0),e.responseType)try{d.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){d&&(d.abort(),f(e),d=null)}),void 0===h&&(h=null),d.send(h)})}}).call(t,n(0))},function(e,t,n){"use strict";var r=n(76);e.exports=function(e,t,n,i,o){var s=new Error(e);return r(s,t,n,i,o)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";(function(t){function r(e){if(!(this instanceof r))return new r(e);this.options=e||{},this.options=i(a,e),this._inflights=new u}var i=n(21),o=n(14).Readable,s={objectMode:!0},a={clean:!0},u=n(100);r.prototype.put=function(e,t){return this._inflights.set(e.messageId,e),t&&t(),this},r.prototype.createStream=function(){var e=new o(s),n=!1,r=[],i=0;return this._inflights.forEach(function(e,t){r.push(e)}),e._read=function(){!n&&i<r.length?this.push(r[i++]):this.push(null)},e.destroy=function(){if(!n){var e=this;n=!0,t.nextTick(function(){e.emit("close")})}},e},r.prototype.del=function(e,t){return e=this._inflights.get(e.messageId),e?(this._inflights.delete(e.messageId),t(null,e)):t&&t(new Error("missing packet")),this},r.prototype.get=function(e,t){return e=this._inflights.get(e.messageId),e?t(null,e):t&&t(new Error("missing packet")),this},r.prototype.close=function(e){this.options.clean&&(this._inflights=null),e&&e()},e.exports=r}).call(t,n(0))},function(e,t,n){"use strict";(function(t,r){function i(e){return L.from(e)}function o(e){return L.isBuffer(e)||e instanceof D}function s(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?M(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function a(e,t){R=R||n(10),e=e||{};var r=t instanceof R;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,o=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(o||0===o)?o:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new F,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(K||(K=n(39).StringDecoder),this.decoder=new K(e.encoding),this.encoding=e.encoding)}function u(e){if(R=R||n(10),!(this instanceof u))return new u(e);this._readableState=new a(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),U.call(this)}function c(e,t,n,r,o){var s=e._readableState;if(null===t)s.reading=!1,g(e,s);else{var a;o||(a=f(s,t)),a?e.emit("error",a):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===L.prototype||(t=i(t)),r?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):l(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?l(e,s,t,!1):v(e,s)):l(e,s,t,!1))):r||(s.reading=!1)}return h(s)}function l(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&b(e)),v(e,t)}function f(e,t){var n;return o(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function h(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function p(e){return e>=G?e=G:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function d(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=p(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function g(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,b(e)}}function b(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(W("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?j.nextTick(y,e):y(e))}function y(e){W("emit readable"),e.emit("readable"),k(e)}function v(e,t){t.readingMore||(t.readingMore=!0,j.nextTick(m,e,t))}function m(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(W("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function _(e){return function(){var t=e._readableState;W("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&N(e,"data")&&(t.flowing=!0,k(e))}}function w(e){W("readable nexttick read 0"),e.read(0)}function S(e,t){t.resumeScheduled||(t.resumeScheduled=!0,j.nextTick(E,e,t))}function E(e,t){t.reading||(W("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),k(e),t.flowing&&!t.reading&&e.read(0)}function k(e){var t=e._readableState;for(W("flow",t.flowing);t.flowing&&null!==e.read(););}function x(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=O(e,t.buffer,t.decoder),n}function O(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?I(e,t):T(e,t),r}function I(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(s===o.length?i+=o:i+=o.slice(0,e),0===(e-=s)){s===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++r}return t.length-=r,i}function T(e,t){var n=L.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,s),0===(e-=s)){s===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(s));break}++i}return t.length-=i,n}function A(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,j.nextTick(P,t,e))}function P(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function C(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var j=n(12);e.exports=u;var R,M=n(35);u.ReadableState=a;var N=(n(9).EventEmitter,function(e,t){return e.listeners(t).length}),U=n(36),L=n(4).Buffer,D=t.Uint8Array||function(){},B=n(13);B.inherits=n(5);var q=n(93),W=void 0;W=q&&q.debuglog?q.debuglog("stream"):function(){};var K,F=n(94),H=n(37);B.inherits(u,U);var z=["error","close","destroy","pause","resume"];Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),u.prototype.destroy=H.destroy,u.prototype._undestroy=H.undestroy,u.prototype._destroy=function(e,t){this.push(null),t(e)},u.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=L.from(e,t),t=""),n=!0),c(this,e,t,!1,n)},u.prototype.unshift=function(e){return c(this,e,null,!0,!1)},u.prototype.isPaused=function(){return!1===this._readableState.flowing},u.prototype.setEncoding=function(e){return K||(K=n(39).StringDecoder),this._readableState.decoder=new K(e),this._readableState.encoding=e,this};var G=8388608;u.prototype.read=function(e){W("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return W("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?A(this):b(this),null;if(0===(e=d(e,t))&&t.ended)return 0===t.length&&A(this),null;var r=t.needReadable;W("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,W("length less than watermark",r)),t.ended||t.reading?(r=!1,W("reading or ended",r)):r&&(W("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=d(n,t)));var i;return i=e>0?x(e,t):null,null===i?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&A(this)),null!==i&&this.emit("data",i),i},u.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},u.prototype.pipe=function(e,t){function n(e,t){W("onunpipe"),e===h&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,o())}function i(){W("onend"),e.end()}function o(){W("cleanup"),e.removeListener("close",c),e.removeListener("finish",l),e.removeListener("drain",b),e.removeListener("error",u),e.removeListener("unpipe",n),h.removeListener("end",i),h.removeListener("end",f),h.removeListener("data",a),y=!0,!p.awaitDrain||e._writableState&&!e._writableState.needDrain||b()}function a(t){W("ondata"),v=!1,!1!==e.write(t)||v||((1===p.pipesCount&&p.pipes===e||p.pipesCount>1&&-1!==C(p.pipes,e))&&!y&&(W("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,v=!0),h.pause())}function u(t){W("onerror",t),f(),e.removeListener("error",u),0===N(e,"error")&&e.emit("error",t)}function c(){e.removeListener("finish",l),f()}function l(){W("onfinish"),e.removeListener("close",c),f()}function f(){W("unpipe"),h.unpipe(e)}var h=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=e;break;case 1:p.pipes=[p.pipes,e];break;default:p.pipes.push(e)}p.pipesCount+=1,W("pipe count=%d opts=%j",p.pipesCount,t);var d=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr,g=d?i:f;p.endEmitted?j.nextTick(g):h.once("end",g),e.on("unpipe",n);var b=_(h);e.on("drain",b);var y=!1,v=!1;return h.on("data",a),s(e,"error",u),e.once("close",c),e.once("finish",l),e.emit("pipe",h),p.flowing||(W("pipe resume"),h.resume()),e},u.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var s=C(t.pipes,e);return-1===s?this:(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},u.prototype.on=function(e,t){var n=U.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&b(this):j.nextTick(w,this))}return n},u.prototype.addListener=u.prototype.on,u.prototype.resume=function(){var e=this._readableState;return e.flowing||(W("resume"),e.flowing=!0,S(this,e)),this},u.prototype.pause=function(){return W("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(W("pause"),this._readableState.flowing=!1,this.emit("pause")),this},u.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;e.on("end",function(){if(W("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){if(W("wrapped data"),n.decoder&&(i=n.decoder.write(i)),(!n.objectMode||null!==i&&void 0!==i)&&(n.objectMode||i&&i.length)){t.push(i)||(r=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<z.length;o++)e.on(z[o],this.emit.bind(this,z[o]));return this._read=function(t){W("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(u.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),u._fromList=x}).call(t,n(3),n(0))},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){e.exports=n(9).EventEmitter},function(e,t,n){"use strict";function r(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||s.nextTick(o,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(s.nextTick(o,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}),this)}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(e,t){e.emit("error",t)}var s=n(12);e.exports={destroy:r,undestroy:i}},function(e,t,n){"use strict";(function(t,r,i){function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){I(t,e)}}function s(e){return M.from(e)}function a(e){return M.isBuffer(e)||e instanceof N}function u(){}function c(e,t){A=A||n(10),e=e||{};var r=t instanceof A;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,s=e.writableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===e.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){v(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function l(e){if(A=A||n(10),!(L.call(l,this)||this instanceof A))return new l(e);this._writableState=new c(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),R.call(this)}function f(e,t){var n=new Error("write after end");e.emit("error",n),T.nextTick(t,n)}function h(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),T.nextTick(r,o),i=!1),i}function p(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=M.from(t,n)),t}function d(e,t,n,r,i,o){if(!n){var s=p(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=t.objectMode?1:r.length;t.length+=a;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else g(e,t,!1,a,r,i,o);return u}function g(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function b(e,t,n,r,i){--t.pendingcb,n?(T.nextTick(i,r),T.nextTick(x,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),x(e,t))}function y(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function v(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(y(n),t)b(e,n,r,t,i);else{var o=S(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||w(e,n),r?P(m,e,n,o,i):m(e,n,o,i)}}function m(e,t,n,r){n||_(e,t),t.pendingcb--,r(),x(e,t)}function _(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function w(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),s=t.corkedRequestsFree;s.entry=n;for(var a=0,u=!0;n;)i[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;i.allBuffers=u,g(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,l=n.encoding,f=n.callback;if(g(e,t,!1,t.objectMode?1:c.length,c,l,f),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function S(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function E(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),x(e,t)})}function k(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,T.nextTick(E,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function x(e,t){var n=S(t);return n&&(k(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function O(e,t,n){t.ending=!0,x(e,t),n&&(t.finished?T.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function I(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var T=n(12);e.exports=l;var A,P=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:T.nextTick;l.WritableState=c;var C=n(13);C.inherits=n(5);var j={deprecate:n(98)},R=n(36),M=n(4).Buffer,N=i.Uint8Array||function(){},U=n(37);C.inherits(l,R),c.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(c.prototype,"buffer",{get:j.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var L;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(L=Function.prototype[Symbol.hasInstance],Object.defineProperty(l,Symbol.hasInstance,{value:function(e){return!!L.call(this,e)||this===l&&(e&&e._writableState instanceof c)}})):L=function(e){return e instanceof this},l.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},l.prototype.write=function(e,t,n){var r=this._writableState,i=!1,o=!r.objectMode&&a(e);return o&&!M.isBuffer(e)&&(e=s(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=u),r.ended?f(this,n):(o||h(this,r,e,n))&&(r.pendingcb++,i=d(this,r,o,e,t,n)),i},l.prototype.cork=function(){this._writableState.corked++},l.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},l.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),l.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},l.prototype._writev=null,l.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||O(this,r,n)},Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),l.prototype.destroy=U.destroy,l.prototype._undestroy=U.undestroy,l.prototype._destroy=function(e,t){this.end(),t(e)}}).call(t,n(0),n(96).setImmediate,n(3))},function(e,t,n){"use strict";function r(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function i(e){var t=r(e);if("string"!=typeof t&&(v.isEncoding===m||!m(e)))throw new Error("Unknown encoding: "+e);return t||e}function o(e){this.encoding=i(e);var t;switch(this.encoding){case"utf16le":this.text=h,this.end=p,t=4;break;case"utf8":this.fillLast=c,t=4;break;case"base64":this.text=d,this.end=g,t=3;break;default:return this.write=b,void(this.end=y)}this.lastNeed=0,this.lastTotal=0,this.lastChar=v.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||-2===i?0:(i=s(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||-2===i?0:(i=s(t[r]),i>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0)}function u(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}function c(e){var t=this.lastTotal-this.lastNeed,n=u(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){var n=a(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t}function h(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function p(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function d(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function g(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function b(e){return e.toString(this.encoding)}function y(e){return e&&e.length?this.write(e):""}var v=n(4).Buffer,m=v.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=f,o.prototype.text=l,o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){"use strict";function r(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function i(e){if(!(this instanceof i))return new i(e);a.call(this,e),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",o)}function o(){var e=this;"function"==typeof this._flush?this._flush(function(t,n){s(e,t,n)}):s(this,null,null)}function s(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}e.exports=i;var a=n(10),u=n(13);u.inherits=n(5),u.inherits(i,a),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},i.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},i.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},i.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},i.prototype._destroy=function(e,t){var n=this;a.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},function(e,t,n){"use strict";var r=n(2);e.exports=function(){return r(this).length=0,this}},function(e,t,n){"use strict";var r=n(107),i=Math.max;e.exports=function(e){return i(0,r(e))}},function(e,t,n){"use strict";var r=Object.create,i=Object.getPrototypeOf,o={};e.exports=function(){var e=Object.setPrototypeOf,t=arguments[0]||r;return"function"==typeof e&&i(e(t(null),o))===o}},function(e,t,n){"use strict";var r,i=n(111),o=n(2),s=Object.prototype.isPrototypeOf,a=Object.defineProperty,u={configurable:!0,enumerable:!1,writable:!0,value:void 0};r=function(e,t){if(o(e),null===t||i(t))return e;throw new TypeError("Prototype must be null or an object")},e.exports=function(e){var t,n;return e?(2===e.level?e.set?(n=e.set,t=function(e,t){return n.call(r(e,t),t),e}):t=function(e,t){return r(e,t).__proto__=t,e}:t=function e(t,n){var i;return r(t,n),i=s.call(e.nullPolyfill,t),i&&delete e.nullPolyfill.__proto__,null===n&&(n=e.nullPolyfill),t.__proto__=n,i&&a(e.nullPolyfill,"__proto__",u),t},Object.defineProperty(t,"level",{configurable:!1,enumerable:!1,writable:!1,value:e.level})):null}(function(){var e,t=Object.create(null),n={},r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(r){try{e=r.set,e.call(t,n)}catch(e){}if(Object.getPrototypeOf(t)===n)return{set:e,level:2}}return t.__proto__=n,Object.getPrototypeOf(t)===n?{level:2}:(t={},t.__proto__=n,Object.getPrototypeOf(t)===n&&{level:1})}()),n(112)},function(e,t,n){"use strict";var r=n(114);e.exports=function(e){if(!r(e))throw new TypeError(e+" is not iterable");return e}},function(e,t,n){var r=n(132),i=function(){},o=function(e){return e.setHeader&&"function"==typeof e.abort},s=function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length},a=function(e,t,n){if("function"==typeof t)return a(e,null,t);t||(t={}),n=r(n||i);var u=e._writableState,c=e._readableState,l=t.readable||!1!==t.readable&&e.readable,f=t.writable||!1!==t.writable&&e.writable,h=function(){e.writable||p()},p=function(){f=!1,l||n.call(e)},d=function(){l=!1,f||n.call(e)},g=function(t){n.call(e,t?new Error("exited with error code: "+t):null)},b=function(t){n.call(e,t)},y=function(){return(!l||c&&c.ended)&&(!f||u&&u.ended)?void 0:n.call(e,new Error("premature close"))},v=function(){e.req.on("finish",p)};return o(e)?(e.on("complete",p),e.on("abort",y),e.req?v():e.on("request",v)):f&&!u&&(e.on("end",h),e.on("close",h)),s(e)&&e.on("exit",g),e.on("end",d),e.on("finish",p),!1!==t.error&&e.on("error",b),e.on("close",y),function(){e.removeListener("complete",p),e.removeListener("abort",y),e.removeListener("request",v),e.req&&e.req.removeListener("finish",p),e.removeListener("end",h),e.removeListener("close",h),e.removeListener("finish",p),e.removeListener("exit",g),e.removeListener("end",d),e.removeListener("error",b),e.removeListener("close",y)}};e.exports=a},function(e,t,n){"use strict";function r(e){return[0,1,2].map(function(t){return[0,1].map(function(n){return[0,1].map(function(r){var s=new i(1);return s.writeUInt8(o.codes[e]<<o.CMD_SHIFT|(n?o.DUP_MASK:0)|t<<o.QOS_SHIFT|r,0,!0),s})})})}var i=n(4).Buffer,o=e.exports;o.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"reserved"},o.codes={};for(var s in o.types){var a=o.types[s];o.codes[a]=s}o.CMD_SHIFT=4,o.CMD_MASK=240,o.DUP_MASK=8,o.QOS_MASK=3,o.QOS_SHIFT=1,o.RETAIN_MASK=1,o.LENGTH_MASK=127,o.LENGTH_FIN_MASK=128,o.SESSIONPRESENT_MASK=1,o.SESSIONPRESENT_HEADER=i.from([o.SESSIONPRESENT_MASK]),o.CONNACK_HEADER=i.from([o.codes.connack<<o.CMD_SHIFT]),o.USERNAME_MASK=128,o.PASSWORD_MASK=64,o.WILL_RETAIN_MASK=32,o.WILL_QOS_MASK=24,o.WILL_QOS_SHIFT=3,o.WILL_FLAG_MASK=4,o.CLEAN_SESSION_MASK=2,o.CONNECT_HEADER=i.from([o.codes.connect<<o.CMD_SHIFT]),o.PUBLISH_HEADER=r("publish"),o.SUBSCRIBE_HEADER=r("subscribe"),o.UNSUBSCRIBE_HEADER=r("unsubscribe"),o.ACKS={unsuback:r("unsuback"),puback:r("puback"),pubcomp:r("pubcomp"),pubrel:r("pubrel"),pubrec:r("pubrec")},o.SUBACK_HEADER=i.from([o.codes.suback<<o.CMD_SHIFT]),o.VERSION3=i.from([3]),o.VERSION4=i.from([4]),o.QOS=[0,1,2].map(function(e){return i.from([e])}),o.EMPTY={pingreq:i.from([o.codes.pingreq<<4,0]),pingresp:i.from([o.codes.pingresp<<4,0]),disconnect:i.from([o.codes.disconnect<<4,0])}},function(e,t,n){"use strict";function r(e,t){switch(t.cork&&(t.cork(),I(i,t)),j&&(j=!1,P()),e.cmd){case"connect":return o(e,t);case"connack":return s(e,t);case"publish":return a(e,t);case"puback":case"pubrec":case"pubrel":case"pubcomp":case"unsuback":return u(e,t);case"subscribe":return c(e,t);case"suback":return l(e,t);case"unsubscribe":return f(e,t);case"pingreq":case"pingresp":case"disconnect":return h(e,t);default:return t.emit("error",new Error("Unknown command")),!1}}function i(e){e.uncork()}function o(e,t){var n=e||{},r=n.protocolId||"MQTT",i=n.protocolVersion||4,o=n.will,s=n.clean,a=n.keepalive||0,u=n.clientId||"",c=n.username,l=n.password;void 0===s&&(s=!0);var f=0;if(!r||"string"!=typeof r&&!E.isBuffer(r))return t.emit("error",new Error("Invalid protocolId")),!1;if(f+=r.length+2,3!==i&&4!==i)return t.emit("error",new Error("Invalid protocol version")),!1;if(f+=1,"string"!=typeof u&&!E.isBuffer(u)||!u&&4!==i||!u&&!s){if(i<4)return t.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(1*s==0)return t.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}else f+=u.length+2;if("number"!=typeof a||a<0||a>65535||a%1!=0)return t.emit("error",new Error("Invalid keepalive")),!1;if(f+=2,f+=1,o){if("object"!=typeof o)return t.emit("error",new Error("Invalid will")),!1;if(!o.topic||"string"!=typeof o.topic)return t.emit("error",new Error("Invalid will topic")),!1;if(f+=E.byteLength(o.topic)+2,o.payload&&o.payload){if(!(o.payload.length>=0))return t.emit("error",new Error("Invalid will payload")),!1;"string"==typeof o.payload?f+=E.byteLength(o.payload)+2:f+=o.payload.length+2}else f+=2}var h=!1;if(null!=c){if(!w(c))return t.emit("error",new Error("Invalid username")),!1;h=!0,f+=E.byteLength(c)+2}if(null!=l){if(!h)return t.emit("error",new Error("Username is required to use password")),!1;if(!w(l))return t.emit("error",new Error("Invalid password")),!1;f+=_(l)+2}t.write(S.CONNECT_HEADER),g(t,f),m(t,r),t.write(4===i?S.VERSION4:S.VERSION3);var p=0;return p|=null!=c?S.USERNAME_MASK:0,p|=null!=l?S.PASSWORD_MASK:0,p|=o&&o.retain?S.WILL_RETAIN_MASK:0,p|=o&&o.qos?o.qos<<S.WILL_QOS_SHIFT:0,p|=o?S.WILL_FLAG_MASK:0,p|=s?S.CLEAN_SESSION_MASK:0,t.write(E.from([p])),C(t,a),m(t,u),o&&(b(t,o.topic),m(t,o.payload)),null!=c&&m(t,c),null!=l&&m(t,l),!0}function s(e,t){var n=e||{},r=n.returnCode;return"number"!=typeof r?(t.emit("error",new Error("Invalid return code")),!1):(t.write(S.CONNACK_HEADER),g(t,2),t.write(e.sessionPresent?S.SESSIONPRESENT_HEADER:x),t.write(E.from([r])))}function a(e,t){var n=e||{},r=n.qos||0,i=n.retain?S.RETAIN_MASK:0,o=n.topic,s=n.payload||k,a=n.messageId,u=0;if("string"==typeof o)u+=E.byteLength(o)+2;else{if(!E.isBuffer(o))return t.emit("error",new Error("Invalid topic")),!1;u+=o.length+2}return E.isBuffer(s)?u+=s.length:u+=E.byteLength(s),r&&"number"!=typeof a?(t.emit("error",new Error("Invalid messageId")),!1):(r&&(u+=2),t.write(S.PUBLISH_HEADER[r][e.dup?1:0][i?1:0]),g(t,u),C(t,_(o)),t.write(o),r>0&&C(t,a),t.write(s))}function u(e,t){var n=e||{},r=n.cmd||"puback",i=n.messageId,o=n.dup&&"pubrel"===r?S.DUP_MASK:0,s=0;return"pubrel"===r&&(s=1),"number"!=typeof i?(t.emit("error",new Error("Invalid messageId")),!1):(t.write(S.ACKS[r][s][o][0]),g(t,2),C(t,i))}function c(e,t){var n=e||{},r=n.dup?S.DUP_MASK:0,i=n.messageId,o=n.subscriptions,s=0;if("number"!=typeof i)return t.emit("error",new Error("Invalid messageId")),!1;if(s+=2,"object"!=typeof o||!o.length)return t.emit("error",new Error("Invalid subscriptions")),!1;for(var a=0;a<o.length;a+=1){var u=o[a].topic,c=o[a].qos;if("string"!=typeof u)return t.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof c)return t.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;s+=E.byteLength(u)+2+1}t.write(S.SUBSCRIBE_HEADER[1][r?1:0][0]),g(t,s),C(t,i);for(var l=!0,f=0;f<o.length;f++){var h=o[f],p=h.topic,d=h.qos;b(t,p),l=t.write(S.QOS[d])}return l}function l(e,t){var n=e||{},r=n.messageId,i=n.granted,o=0;if("number"!=typeof r)return t.emit("error",new Error("Invalid messageId")),!1;if(o+=2,"object"!=typeof i||!i.length)return t.emit("error",new Error("Invalid qos vector")),!1;for(var s=0;s<i.length;s+=1){if("number"!=typeof i[s])return t.emit("error",new Error("Invalid qos vector")),!1;o+=1}return t.write(S.SUBACK_HEADER),g(t,o),C(t,r),t.write(E.from(i))}function f(e,t){var n=e||{},r=n.messageId,i=n.dup?S.DUP_MASK:0,o=n.unsubscriptions,s=0;if("number"!=typeof r)return t.emit("error",new Error("Invalid messageId")),!1;if(s+=2,"object"!=typeof o||!o.length)return t.emit("error",new Error("Invalid unsubscriptions")),!1;for(var a=0;a<o.length;a+=1){if("string"!=typeof o[a])return t.emit("error",new Error("Invalid unsubscriptions")),!1;s+=E.byteLength(o[a])+2}t.write(S.UNSUBSCRIBE_HEADER[1][i?1:0][0]),g(t,s),C(t,r);for(var u=!0,c=0;c<o.length;c++)u=b(t,o[c]);return u}function h(e,t){return t.write(S.EMPTY[e.cmd])}function p(e){return e>=0&&e<128?1:e>=128&&e<16384?2:e>=16384&&e<2097152?3:e>=2097152&&e<268435456?4:0}function d(e){var t=0,n=0,r=E.allocUnsafe(p(e));do{t=e%128|0,e=e/128|0,e>0&&(t|=128),r.writeUInt8(t,n++)}while(e>0);return r}function g(e,t){var n=R[t];n||(n=d(t),t<16384&&(R[t]=n)),e.write(n)}function b(e,t){var n=E.byteLength(t);C(e,n),e.write(t,"utf8")}function y(e,t){return e.write(T[t])}function v(e,t){return e.write(A(t))}function m(e,t){"string"==typeof t?b(e,t):t?(C(e,t.length),e.write(t)):C(e,0)}function _(e){return e?e instanceof E?e.length:E.byteLength(e):0}function w(e){return"string"==typeof e||e instanceof E}var S=n(47),E=n(4).Buffer,k=E.allocUnsafe(0),x=E.from([0]),O=n(142),I=n(12).nextTick,T=O.cache,A=O.generateNumber,P=O.generateCache,C=y,j=!0;Object.defineProperty(r,"cacheNumbers",{get:function(){return C===y},set:function(e){e?(T&&0!==Object.keys(T).length||(j=!0),C=y):(j=!1,C=v)}});var R={};e.exports=r},function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,n){if(e&&c.isObject(e)&&e instanceof r)return e;var i=new r;return i.parse(e,t,n),i}function o(e){return c.isString(e)&&(e=i(e)),e instanceof r?e.format():r.prototype.format.call(e)}function s(e,t){return i(e,!1,!0).resolve(t)}function a(e,t){return e?i(e,!1,!0).resolveObject(t):t}var u=n(145),c=n(146);t.parse=i,t.resolve=s,t.resolveObject=a,t.format=o,t.Url=r;var l=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","\t"],d=["{","}","|","\\","^","`"].concat(p),g=["'"].concat(d),b=["%","/","?",";","#"].concat(g),y=["/","?","#"],v=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},E=n(147);r.prototype.parse=function(e,t,n){if(!c.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),i=-1!==r&&r<e.indexOf("#")?"?":"#",o=e.split(i),s=/\\/g;o[0]=o[0].replace(s,"/"),e=o.join(i);var a=e;if(a=a.trim(),!n&&1===e.split("#").length){var f=h.exec(a);if(f)return this.path=a,this.href=a,this.pathname=f[1],f[2]?(this.search=f[2],this.query=t?E.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var p=l.exec(a);if(p){p=p[0];var d=p.toLowerCase();this.protocol=d,a=a.substr(p.length)}if(n||p||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var k="//"===a.substr(0,2);!k||p&&w[p]||(a=a.substr(2),this.slashes=!0)}if(!w[p]&&(k||p&&!S[p])){for(var x=-1,O=0;O<y.length;O++){var I=a.indexOf(y[O]);-1!==I&&(-1===x||I<x)&&(x=I)}var T,A;A=-1===x?a.lastIndexOf("@"):a.lastIndexOf("@",x),-1!==A&&(T=a.slice(0,A),a=a.slice(A+1),this.auth=decodeURIComponent(T)),x=-1;for(var O=0;O<b.length;O++){var I=a.indexOf(b[O]);-1!==I&&(-1===x||I<x)&&(x=I)}-1===x&&(x=a.length),this.host=a.slice(0,x),a=a.slice(x),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var C=this.hostname.split(/\./),O=0,j=C.length;O<j;O++){var R=C[O];if(R&&!R.match(v)){for(var M="",N=0,U=R.length;N<U;N++)R.charCodeAt(N)>127?M+="x":M+=R[N];if(!M.match(v)){var L=C.slice(0,O),D=C.slice(O+1),B=R.match(m);B&&(L.push(B[1]),D.unshift(B[2])),D.length&&(a="/"+D.join(".")+a),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=u.toASCII(this.hostname));var q=this.port?":"+this.port:"",W=this.hostname||"";this.host=W+q,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!_[d])for(var O=0,j=g.length;O<j;O++){var K=g[O];if(-1!==a.indexOf(K)){var F=encodeURIComponent(K);F===K&&(F=escape(K)),a=a.split(K).join(F)}}var H=a.indexOf("#");-1!==H&&(this.hash=a.substr(H),a=a.slice(0,H));var z=a.indexOf("?");if(-1!==z?(this.search=a.substr(z),this.query=a.substr(z+1),t&&(this.query=E.parse(this.query)),a=a.slice(0,z)):t&&(this.search="",this.query={}),a&&(this.pathname=a),S[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var q=this.pathname||"",G=this.search||"";this.path=q+G}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(o=E.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||S[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),s=s.replace("#","%23"),t+i+n+s+r},r.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(c.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,i=Object.keys(this),o=0;o<i.length;o++){var s=i[o];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),u=0;u<a.length;u++){var l=a[u];"protocol"!==l&&(n[l]=e[l])}return S[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!S[e.protocol]){for(var f=Object.keys(e),h=0;h<f.length;h++){var p=f[h];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||w[e.protocol])n.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var g=n.pathname||"",b=n.search||"";n.path=g+b}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var y=n.pathname&&"/"===n.pathname.charAt(0),v=e.host||e.pathname&&"/"===e.pathname.charAt(0),m=v||y||n.host&&e.pathname,_=m,E=n.pathname&&n.pathname.split("/")||[],d=e.pathname&&e.pathname.split("/")||[],k=n.protocol&&!S[n.protocol];if(k&&(n.hostname="",n.port=null,n.host&&(""===E[0]?E[0]=n.host:E.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),m=m&&(""===d[0]||""===E[0])),v)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,E=d;else if(d.length)E||(E=[]),E.pop(),E=E.concat(d),n.search=e.search,n.query=e.query;else if(!c.isNullOrUndefined(e.search)){if(k){n.hostname=n.host=E.shift();var x=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");x&&(n.auth=x.shift(),n.host=n.hostname=x.shift())}return n.search=e.search,n.query=e.query,c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!E.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var O=E.slice(-1)[0],I=(n.host||e.host||E.length>1)&&("."===O||".."===O)||""===O,T=0,A=E.length;A>=0;A--)O=E[A],"."===O?E.splice(A,1):".."===O?(E.splice(A,1),T++):T&&(E.splice(A,1),T--);if(!m&&!_)for(;T--;T)E.unshift("..");!m||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),I&&"/"!==E.join("/").substr(-1)&&E.push("");var P=""===E[0]||E[0]&&"/"===E[0].charAt(0);if(k){n.hostname=n.host=P?"":E.length?E.shift():"";var x=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");x&&(n.auth=x.shift(),n.host=n.hostname=x.shift())}return m=m||n.host&&E.length,m&&!P&&E.unshift(""),E.length?n.pathname=E.join("/"):(n.pathname=null,n.path=null),c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=f.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function r(e,t){var n,r;return t.port=t.port||1883,t.hostname=t.hostname||t.host||"localhost",n=t.port,r=t.hostname,i.createConnection(n,r)}var i=n(150);e.exports=r},function(e,t,n){"use strict";function r(e){c?wx.sendSocketMessage({data:e.buffer||e}):l.push(e)}function i(e,t){var n={OPEN:1,CLOSING:2,CLOSED:3,readyState:c?1:0,send:r,close:wx.closeSocket,onopen:null,onmessage:null,onclose:null,onerror:null};return wx.connectSocket({url:e,protocols:t}),wx.onSocketOpen(function(e){n.readyState=n.OPEN,c=!0;for(var t=0;t<l.length;t++)r(l[t]);l=[],n.onopen&&n.onopen.apply(n,arguments)}),wx.onSocketMessage(function(e){n.onmessage&&n.onmessage.apply(n,arguments)}),wx.onSocketClose(function(){n.onclose&&n.onclose.apply(n,arguments),n.readyState=n.CLOSED,c=!1}),wx.onSocketError(function(){n.onerror&&n.onerror.apply(n,arguments),n.readyState=n.CLOSED,c=!1}),n}function o(e,t){var n="wxs"===e.protocol?"wss":"ws",r=n+"://"+e.hostname+e.path;return e.port&&80!==e.port&&443!==e.port&&(r=n+"://"+e.hostname+":"+e.port+e.path),"function"==typeof e.transformWsUrl&&(r=e.transformWsUrl(r,e,t)),r}function s(e){e.hostname||(e.hostname="localhost"),e.path||(e.path="/"),e.wsOptions||(e.wsOptions={})}function a(e,t){var n="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt";s(t);var r=o(t,e);return f(i(r,[n]))}function u(e,t){if(t.hostname=t.hostname||t.host,!t.hostname)throw new Error("Could not determine host. Specify host manually.");return a(e,t)}var c=!1,l=[],f=n(53);e.exports=u},function(e,t,n){"use strict";(function(t,r){function i(e,t,n){var r=new s({objectMode:e.objectMode});return r._write=t,r._flush=n,r}function o(e,n,o){function s(e,t,n){if(m.readyState!==m.OPEN)return void n();O&&"string"==typeof e&&(e=c.from(e,"utf8")),m.send(e,n)}function l(e,t,n){if(m.bufferedAmount>k)return void setTimeout(l,x,e,t,n);O&&"string"==typeof e&&(e=c.from(e,"utf8"));try{m.send(e)}catch(e){return n(e)}n()}function f(e){m.close(),e()}function h(){v.setReadable(E),v.setWritable(E),v.emit("connect")}function p(){v.end(),v.destroy()}function d(e){v.destroy(e)}function g(e){var t=e.data;t=t instanceof ArrayBuffer?c.from(t):c.from(t,"utf8"),E.push(t)}function b(){m.close()}function y(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)"string"==typeof e[r].chunk?n[r]=c.from(e[r],"utf8"):n[r]=e[r].chunk;this._write(c.concat(n),"binary",t)}var v,m,_="browser"===t.title,w=!!r.WebSocket,S=_?l:s;n&&!Array.isArray(n)&&"object"==typeof n&&(o=n,n=null,("string"==typeof o.protocol||Array.isArray(o.protocol))&&(n=o.protocol)),o||(o={}),void 0===o.objectMode&&(o.objectMode=!(!0===o.binary||void 0===o.binary));var E=i(o,S,f);o.objectMode||(E._writev=y);var k=o.browserBufferSize||524288,x=o.browserBufferTimeout||1e3;"object"==typeof e?m=e:(m=w&&_?new u(e,n):new u(e,n,o),m.binaryType="arraybuffer"),m.readyState===m.OPEN?v=E:(v=a.obj(),m.onopen=h),v.socket=m,m.onclose=p,m.onerror=d,m.onmessage=g,E.on("close",b);var O=!o.objectMode;return v}var s=n(14).Transform,a=n(152),u=n(154),c=n(4).Buffer;e.exports=o}).call(t,n(0),n(3))},function(e,t,n){"use strict";(function(t){function r(e,t){var n=e.protocol+"://"+e.hostname+":"+e.port+e.path;return"function"==typeof e.transformWsUrl&&(n=e.transformWsUrl(n,e,t)),n}function i(e){e.hostname||(e.hostname="localhost"),e.port||("wss"===e.protocol?e.port=443:e.port=80),e.path||(e.path="/"),e.wsOptions||(e.wsOptions={}),f||"wss"!==e.protocol||l.forEach(function(t){e.hasOwnProperty(t)&&!e.wsOptions.hasOwnProperty(t)&&(e.wsOptions[t]=e[t])})}function o(e,t){var n="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt";i(t);var o=r(t,e);return u(o,[n],t.wsOptions)}function s(e,t){return o(e,t)}function a(e,t){if(t.hostname||(t.hostname=t.host),!t.hostname){if("undefined"==typeof document)throw new Error("Could not determine host. Specify host manually.");var n=c.parse(document.URL);t.hostname=n.hostname,t.port||(t.port=n.port)}return o(e,t)}var u=n(53),c=n(49),l=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],f="browser"===t.title;e.exports=f?a:s}).call(t,n(0))},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(155),o=n(56),s="69$hsYgrj_K1xhm-yHC45@GcgN=mPMX+NANNmu=4llIKL@WPZ4",a=n(156),u=!1,c={incLaunchCount:function(){var e=c.encryptedStorage().get(o.STORAGE_KEY);e.launchCount=e.launchCount||0,e.launchCount++,c.encryptedStorage().set(o.STORAGE_KEY,e)},getStorageKey:function(e){return c.encryptedStorage().get(o.STORAGE_KEY)[e]},removeStorageKey:function(e){var t=c.encryptedStorage().get(o.STORAGE_KEY);delete t[e],c.encryptedStorage().set(o.STORAGE_KEY,t)},updateStorage:function(e,t){var n=c.encryptedStorage().get(o.STORAGE_KEY);n[e]=t,c.encryptedStorage().set(o.STORAGE_KEY,n)},resetStorage:function(){var e=c.encryptedStorage().get(o.STORAGE_KEY),t=e.launchCount,n=e.launchTime,r=e.installDate,i=e.newInstall,s=e.standaloneDate;c.encryptedStorage().set(o.STORAGE_KEY,{launchCount:t,launchTime:n,installDate:r,newInstall:i,standaloneDate:s})},setDirectInfluence:function(e){u=e},getDirectInfluence:function(){return u},isValidUserId:function(e){return!!e&&(!(e.length<3||e.length>64)&&!/\s|\/|\\|\+|\*|#/gi.test(e))},encryptedStorage:function(){var e=this;return{get:function(t){return i.get(t)?JSON.parse(e.decrypt(i.get(t))):{}},set:function(t,n){return n="object"===(void 0===n?"undefined":r(n))?JSON.stringify(n):n,i.set(t,e.encrypt(n)),e}}},decrypt:function(e){return String(e).split("").map(function(e,t){return String.fromCharCode(e.charCodeAt(0)-s.charCodeAt(t%s.length))}).join("")},encrypt:function(e){return String(e).split("").map(function(e,t){return String.fromCharCode(e.charCodeAt(0)+s.charCodeAt(t%s.length))}).join("")},getAppDomain:function(e,t){return t?o.HOST_DEV:-1===o.EXCLUSIVE_APPIDS.indexOf(e)?e.replace("-demo","")+"."+o.HOST:o.HOST},generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},defaultDevice:function(e){var t=e.appId,i=e.userId,s=e.token,u=e.realtime,l=e.error;s=s||"disabled";var f="ALLOWED",h=c.getStorageKey("newInstall")||!1,p=c.getStorageKey("installDate")||null,d=c.getStorageKey("registerTs")||null,g=!1;c.getStorageKey("guestUserId")&&(g=!0),!0!==h?(h=!0,p=Date.now(),c.updateStorage("newInstall",!0),c.updateStorage("installDate",p)):h=!1;var b=navigator.connection||navigator.mozConnection||navigator.webkitConnection||{type:null};"object"===(void 0===s?"undefined":r(s))?s=JSON.stringify(s):"DENIED"===s?(f=s,s="NOT_EXIST"):s.startsWith("NOT_SUPPORTED")&&(f=s,s="NOT_EXIST"),l&&(f="ERR",s="NOT_EXIST");var y={realtime:u,launchCount:+this.encryptedStorage().get(o.STORAGE_KEY).launchCount,launchTime:Date.now(),newInstall:h,installDate:p,appId:t,userId:i,deviceToken:s,deviceType:"web",tokenStatus:f,tokenErr:l?{message:l.message,code:l.code}:null,deviceModel:a.name?a.name.toLowerCase():"NodeJS",osVersion:a.os.version,deviceManufacture:a.os.family,browserVersion:a.version,appVersion:n(157).version,subscriptions:this.getAllStoredChannels(),timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone,connection:b.type||"UNKNOWN",standalone:this.isAddedToHomeScreen(),standaloneDate:this.getStandaloneDate(),isGuest:g,registerTs:d};return"$omit_token"===s&&(delete y.deviceToken,delete y.tokenStatus,delete y.tokenErr),y},isAddedToHomeScreen:function(){var e=!1;window.navigator&&void 0!==window.navigator.standalone&&(e=!0===window.navigator.standalone),e||(e=window.matchMedia("(display-mode: standalone)").matches);var t=c.getStorageKey("isStandalone")||!1;return e&&!0!==t&&(c.updateStorage("isStandalone",!0),c.updateStorage("standaloneDate",Date.now())),e},getStandaloneDate:function(){return c.getStorageKey("standaloneDate")},toTopicName:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"user",i=void 0,o=void 0;switch(r){case"user":var s=n.split("/");"public"===s[0]?(i=s[0],o=s[1]):(i=t,o=s[0]);break;case"publish":i="*"===t?"public":t,o=n;break;case"event":case"track":i=n,o=t||"+";break;default:throw new Error("Invalid topic type.")}return["app",e,r,i,o].join("/")},toChannelName:function(e){var t=e.split("/");return"user"===t[2]?"public"===t[3]?"public/"+t[4]:t[4]:null},fromChabokChannel:function(e){var t=e.split("/"),n=void 0;switch(t.length){case 1:n="public/"+t[0];break;case 2:if("public"!==t[0]&&"private"!==t[0])throw new Error("Invalid channel name format, please read documentations.");n="public"===t[0]?"public/"+t[1]:t[1];break;default:throw new Error("Invalid channel name format, please read documentations.")}return n},toChabokMessage:function(e,t){var n=e.split("/"),r=n[3]+"/"+n[4];try{var i=JSON.parse(t);return i.channel=r,i}catch(e){return t}},toEventMessage:function(e,t){var n=e.split("/"),r=n[1],i=n[3],o=n[4],s={appId:r,eventName:i,deviceId:o,receivedAt:Date.now()};try{return s.data=JSON.parse(t),s.createdAt=s.data.createdAt,s.id=s.data.id,s}catch(e){return t}},getAllStoredChannels:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new Set(e),n=this.getStorageKey("channels");return Array.isArray(n)||(n=[]),n.forEach(function(e){return t.add(e)}),o.DEFAULT_CHANNELS.forEach(function(e){return t.add(e)}),Array.from(t)},isSubscribed:function(e){return c.getAllStoredChannels().includes(e)}};e.exports=c},function(e,t,n){"use strict";e.exports={HOST:"push.adpdigital.com",HOST_DEV:"sandbox.push.adpdigital.com",BASE_URL:"https://${host}/api/",BROKER_ADDRESS:"wss://${host}:4433",EXCLUSIVE_APPIDS:["chabok-demo","adp-bms-push"],DEFAULT_CHANNELS:["default"],STORAGE_KEY:"CHABOK_SDK"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(6),c=n(70),l=n(89),f=n(9),h=n(55),p=n(158),d=n(56),g=n(167),b=u(),y=u(),v=u(),m=u(),_=u(),w=u(),S=u(),E=u(),k=u(),x=u(),O=u(),I=u(),T=u(),A=u(),P=u(),C=u(),j=u(),R=u(),M=u(),N=u(),U=u(),L=1e3,D=null,B=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(D){var s;return s=D,i(o,s)}var a={realtime:!0,webpush:{enabled:!0,publicKey:null},silent:!1,serviceWorker:{}};if(o.config=Object.assign(a,n),o.push=new g(o.config.serviceWorker,o.config.webpush.publicKey),o.push.addListener("notificationAction",o[M].bind(o)),o.push.addListener("notificationOpened",o[N].bind(o)),o.push.addListener("notificationUpdateToken",o[U].bind(o)),o.auth=e,e.hasOwnProperty("apiKey")&&e.hasOwnProperty("username")&&e.hasOwnProperty("password")&&!e.hasOwnProperty("webKey")){var u=new Error("Chabok error: this method of authentication is deprecated since v1.1.0, please check http://bit.ly/2V6RUYl");throw u.code=100,u}if(!e.appId||"string"!=typeof e.appId){var c=new Error("Chabok error: invalid appId");throw c.code=101,c}var l=o.config.webpush.publicKey;if(o.config.webpush.enabled&&!("string"==typeof l&&l.length>0)){var f=new Error("Chabok error: cannot initialize Chabok. publicKey required when web push is enabled");throw f.code=102,f}return o._createdAt=Date.now(),o.isForground=!0,o[b](),o[j](),D=o,o}return o(t,e),a(t,[{key:"registerAsGuest",value:function(e){return e=e||h.getStorageKey("guestUserId"),e||(e=h.generateUUID()),h.updateStorage("guestUserId",e),this[T](e,["CHABOK_GUEST"])}},{key:"register",value:function(e){return e!==h.getStorageKey("guestUserId")&&h.removeStorageKey("guestUserId"),this[T](e)}},{key:"addTag",value:function(e){return this[k]("addTags",e)}},{key:"addTags",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this[k].apply(this,["addTags"].concat(t))}},{key:"removeTag",value:function(e){return this[k]("removeTags",e)}},{key:"removeTags",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this[k].apply(this,["removeTags"].concat(t))}},{key:"isRegistered",value:function(){return null!=this.getInstallationId()}},{key:"getInstallationId",value:function(){return h.encryptedStorage().get(d.STORAGE_KEY).deviceId}},{key:"getInstallations",value:function(e){return e&&0!==e.length?this.webClient.get("installations",{params:{filter:{where:{id:{inq:e}}}}}).then(function(e){return e.data}):[]}},{key:"publish",value:function(e){return this[m](e)}},{key:"publishEvent",value:function(e,t){if(!e)throw new Error("eventName is undefined. Please provide a name for event");if("object"!==(void 0===t?"undefined":s(t))||null===t||t instanceof Array||t instanceof Date)throw new Error("data is invalid. Please provide a data for event");t={data:JSON.parse(JSON.stringify(t))},this[v]("event",e,t)}},{key:"track",value:function(e,t){if(!e)throw new Error("eventName is undefined. Please provide a name for event");t=t||{},t={data:JSON.parse(JSON.stringify(t))};var n=h.getStorageKey("influenceData");n&&n.expire>Date.now()&&(h.getDirectInfluence()&&(n.direct=!0),t.influence=n),this[v]("track",e,t)}},{key:"trackPurchase",value:function(e,t){if(!e)throw new Error("eventName is undefined. Please provide a name for event");if("object"!==(void 0===t?"undefined":s(t))||null===t||t instanceof Array||t instanceof Date)throw new Error("chabokEvent is invalid. Please provide a chabokEvent object.");if("number"!=typeof t.revenue)throw new Error("chabokEvent.revenue not a number. revenue is required and should be a number value");var n=t.data||{};n.isRevenue=!0,n.value=t.revenue,t.currency&&(n.currency=t.currency),this.track(e,n)}},{key:"setUserInfo",value:function(e){this.setUserAttributes(e)}},{key:"getUserInfo",value:function(){return this.getUserAttributes()}},{key:"setUserAttributes",value:function(e){if("object"!==(void 0===e?"undefined":s(e))||null===e||e instanceof Array||e instanceof Date){var t=new Error("Chabok error: invalid userAttribute");return t.code=104,Promise.reject(t)}if(!this[A]("$omit_token",null).id){var n=new Error("Chabok error: user is not registered");return n.code=105,Promise.reject(n)}return this.webClient.put("installations/userInfo",{installationId:this.getInstallationId(),data:e}).then(function(e){return!0}).catch(function(e){if(404===e.response.status)return!1;throw e})}},{key:"getUserAttributes",value:function(){var e=this.getInstallationId();if(!e){var t=new Error("Chabok error: user is not registered");return t.code=105,Promise.reject(t)}return this.webClient.get("installations/"+e).then(function(e){if(e&&e.data)return e.data.userInfo})}},{key:"incrementUserAttribute",value:function(e,t){if(!e)throw new Error("attribute parameter is undefined. Please, provide an attribute");if(void 0===t&&(t=1),"number"!=typeof t)throw new Error("value parameter is not number");var n={};if(Array.isArray(e))e.forEach(function(e){var r={};r[e]=t,n=Object.assign(n,r)});else if("object"!==(void 0===e?"undefined":s(e))){var r={};r[e]=t,n=Object.assign(n,r)}else n=e;var i=Object.keys(n).map(function(e){return{attribute:e,value:n[e]}});return this.webClient.post("installations/incrementAttribute",{installationId:this.getInstallationId(),attributes:i}).then(function(e){return!0}).catch(function(e){if(404===e.response.status)return!1;throw e})}},{key:"getTags",value:function(){var e=this.getUserId();if(!e){var t=new Error("Chabok error: user is not registered");return t.code=105,Promise.reject(t)}return this.webClient.get("installations/tags/"+e).then(function(e){return e.data||[]})}},{key:"subscribe",value:function(e,t){t=t||!1,e=Array.isArray(e)?e:[e];var n=e.map(function(e){return{name:h.fromChabokChannel(e),type:"user",live:t}});this[_](n)}},{key:"unSubscribe",value:function(e){e=Array.isArray(e)?e:[e];var t=e.map(function(e){return{name:h.fromChabokChannel(e),type:"user"}});this[w](t)}},{key:"subscribeEvent",value:function(e,t,n){void 0===n&&(n=!0),this[_]({name:e,userId:t,live:n,type:"event"})}},{key:"unSubscribeEvent",value:function(e,t){this[w]({name:e,userId:t,type:"event"})}},{key:"unregister",value:function(){this.webClient.delete("installations/"+this.getInstallationId()),this[x]()}},{key:x,value:function(){this.client&&this.client.end(),h.resetStorage()}},{key:"isAlreadyReceived",value:function(e){return!!e.id&&function(e){var t=h.encryptedStorage().get(d.STORAGE_KEY),n=t.receivedIds||new Array(L),r=n.indexOf(e)>-1;return n[n.length%L]=e,t.receivedIds=n,h.encryptedStorage().set(d.STORAGE_KEY,t),r}(e.id)}},{key:"errorHandler",value:function(e,t){e&&this.emit&&this.emit("error",e)}},{key:"subAckCallback",value:function(e,t){if(e)return void(this.emit&&this.emit("error",e));if(!e){var n=[];t.forEach(function(e){var t=h.toChannelName(e.topic);t&&n.push(t)});var r=h.getAllStoredChannels(n);h.updateStorage("channels",r)}}},{key:"dismiss",value:function(){this[C](),D=null}},{key:"showLocalNotification",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(arguments[1],t.title||" "),r=t;t.groupId&&(r.tag=t.groupId),"undefined"!=typeof Notification&&Notification&&Notification.requestPermission&&Notification.requestPermission(function(i){"granted"===i&&navigator.serviceWorker.ready.then(function(i){i.showNotification(n,r).then(function(n){if(t.notifDelivery){var r={actionType:"SHOWN",msgId:t.messageId,trackId:t.trackId,actionTs:Date.now()};e[M].bind(e)(r)}}).catch(function(e){})})})}},{key:M,value:function(e){e.type=1;var t={installationId:this.getInstallationId(),userId:this.userId,deviceType:"web",sessionId:h.generateUUID(),createdAt:Date.now(),eventData:[e]};return this.webClient.post("installations/events",t).then(function(e){return!0}).catch(function(e){if(404===e.response.status)return!1;throw e})}},{key:N,value:function(e){this.emit("notificationOpened",e)}},{key:U,value:function(e){e&&this.webClient.post("installations/updateDeviceToken",{installationId:this.getInstallationId(),deviceToken:JSON.stringify(e)}).then(function(e){}).catch(function(e){throw e})}},{key:"getUserId",value:function(){return h.encryptedStorage().get(d.STORAGE_KEY).userId}},{key:b,value:function(){var e=this.auth,t=e.appId,n=e.webKey,r=e.devMode,i=d.BASE_URL.replace("${host}",h.getAppDomain(t,r));h.incLaunchCount(),this.webClient=c.create({baseURL:i,timeout:15e3,headers:{"X-Access-Token":n}})}},{key:C,value:function(){var e=this;this.client&&(this.client.once("connect",function(){return e.client.end()}),this.client.end())}},{key:R,value:function(e){var t=this.config.realtime,n=h.encryptedStorage().get(d.STORAGE_KEY);return this.deviceId=e.id,n.deviceId=this.deviceId,n.userId=e.userId,h.encryptedStorage().set(d.STORAGE_KEY,n),this.emit("registered",this.deviceId),t&&this[y](),{deviceId:this.deviceId}}},{key:O,value:function(e){var t=this,n=e.id;return n?this.webClient.put("installations/"+n,e).then(function(n){return e.id=n.data.id,t[R](e)}).catch(function(n){if(404===n.response.status)return h.removeStorageKey("channels"),t[I](e);throw n}):this[I](e)}},{key:I,value:function(e){var t=this,n=h.getStorageKey("reregisteredFrom");return n&&(e.reregisteredFrom=n,h.removeStorageKey("reregisteredFrom")),this.webClient.post("installations",e).then(function(n){return e.id=n.data.id,t[R](e)}).catch(function(e){throw e})}},{key:A,value:function(e,t){var n=this.auth.appId,r=this.config.realtime,i=this.userId,o=h.encryptedStorage().get(d.STORAGE_KEY),s=o.deviceId,a=h.defaultDevice({appId:n,userId:i,token:e,realtime:r,error:t});return s&&(a.id=s),a}},{key:P,value:function(e,t,n,r){return r?("object"===(void 0===r?"undefined":s(r))&&(r=Object.assign(r,{expirationTime:0}),this.emit("subscriptionToken",r)),this[A](r,n)):this[A](r,n)}},{key:y,value:function(){var e=this;if(this.deviceId&&this.userId&&(!this.client||!this.client.connected)&&(!this.client||!this.client.reconnecting||this.client.connected||this.client.disconnected||this.client.disconnecting)){var t=this.auth,n=t.webKey,r=t.appId,i=t.devMode,o={clientId:[r,this.userId,this.deviceId].join("/"),clean:!1,keepalive:180,reconnectPeriod:3e3,connectTimeout:15e3,username:n,password:n,wsOptions:{}},s=d.BROKER_ADDRESS.replace("${host}",h.getAppDomain(r,i));this.client=l.connect(s,o),this.client.on("connect",function(t){e[S].bind(e)()}),this.client.on("message",this[E].bind(this)),this.client.on("reconnect",function(t){e.emit("connecting")}),this.client.on("close",function(t){e.emit("closed")}),this.client.on("error",function(t){e.emit("error",t)}),this.client.on("offline",function(){this.emit("disconnected")})}}},{key:S,value:function(){var e=this,t=this.auth.appId,n=h.toTopicName(t,this.userId,this.deviceId,"user"),r=d.DEFAULT_CHANNELS.map(function(n){return h.toTopicName(t,e.userId,n)}),i={},o=h.getStorageKey("channels");return Array.isArray(o)||(o=[]),d.DEFAULT_CHANNELS.some(function(e){return o.includes(e)})?(this.emit("connected"),Promise.resolve("Subscribed before")):(r.push(n),r.forEach(function(e){i[e]=1}),this.isForground?this.client.subscribe(i,function(t,i){if(!t){var s=[];i.forEach(function(e){if(r.includes(e.topic)&&e.topic!==n){var t=h.toChannelName(e.topic);t&&s.push(t)}}),o=h.getAllStoredChannels(s),h.updateStorage("channels",o)}e.emit("connected")}):this[C]())}},{key:E,value:function(e,t){var n=e.split("/");if(5===n.length){if("user"===n[2]){var r=h.toChabokMessage(e,t);if(this.isAlreadyReceived(r))return!1;if(!this.config.silent&&!r.silent){var i={body:r.content,groupId:r.channel};r.notification=r.notification||{},r.notification.actions&&r.notification.actions.forEach(function(e){e.action||(e.action=e.id)}),i.title=r.notification.title,i.badge=r.notification.badge,i.messageId=r.id,i.trackId=r.trackId,i.notifDelivery=r.notification.notifDelivery,r.notification.text&&(i.body=r.notification.text),r.notification.body&&(i.body=r.notification.body),r.notification.icon&&(i.icon=r.notification.icon),r.notification.clickUrl&&(i.clickUrl=r.notification.clickUrl),r.notification.groupId&&(i.groupId=r.notification.groupId),r.notification.actions&&(i.actions=r.notification.actions),r.notification.vibrate&&(i.vibrate=r.notification.vibrate),r.notification.mediaUrl&&(i.image=r.notification.mediaUrl),r.notification.sound&&(i.sound=r.notification.sound),r.notification.dir&&(i.dir=r.notification.dir),r.notification.chromeBadge&&(i.badge=r.notification.chromeBadge),r.notification.requireInteraction&&(i.requireInteraction=r.notification.requireInteraction),r.notification.renotify&&(i.renotify=r.notification.renotify),i.data=JSON.parse(JSON.stringify(i)),r.notification.disableLocalNotif||this.showLocalNotification(i)}return this.emit("message",r)}if("event"===n[2]){var o=h.toEventMessage(e,t);if(!this.isAlreadyReceived(o))return this.emit(n[3],o)}}}},{key:m,value:function(e){var t=this;return new Promise(function(n,r){if(!e||!e.user){var i=new Error("Chabok error: invalid Message, please provide user");i.code=106,r(i)}if(!e.channel){var o=new Error("Chabok error: invalid channel name");o.code=107,r(o)}e.id||(e.id=Date.now()),e.createdAt||(e.createdAt=Date.now());var s=h.toTopicName(t.auth.appId,e.user,e.channel,"publish"),a=JSON.stringify(e);return t.client?t.client.publish(s,a,{qos:e.live?0:1,retain:e.stateful},function(e,t){return e?r(e):n(t.payload)}):t[m].bind(t)(e)})}},{key:v,value:function(e,t,n){var r=this;if(!this.client)return this.once("connected",function(){return r[v].bind(r)(e,t,n)});n=n||{};var i=h.toTopicName(this.auth.appId,this.deviceId,t,e),o=void 0===n.live||n.live,s=n.stateful;n.id=n.id||p.generate(),delete n.live,delete n.stateful;var a=JSON.stringify(n);return this.client.publish(i,a,{qos:o?0:1,retain:s},this.errorHandler.bind(this))}},{key:j,value:function(){var e=this;this.config.realtime&&window&&(window.addEventListener("focus",function(){e.isForground=!0,e.timer&&(clearTimeout(e.timer),e.timer=null),e.userId&&e[y]()}),window.addEventListener("blur",function(){e.isForground=!1,e.timer||(e.timer=setTimeout(function(){e[C](),e.timer=null},1e3))}))}},{key:_,value:function(e){var t=this;if(!this.client||!this.client.connected)return this.once("connected",function(){return t[_].bind(t)(e)});Array.isArray(e)||(e=[e]);var n=[];if(e.forEach(function(e){var t=e.name;"event"===e.type||h.isSubscribed(t)||n.push(t)}),0===n.length)return Promise.resolve("Subscribed before");var r=h.getAllStoredChannels(n),i=this[A]("$omit_token",null);if(!i.id){var o=new Error("Chabok error: user is not registered");return o.code=105,Promise.reject(o)}i.subscriptions=r,this[O](i).then(function(e){}).catch(function(e){});var s={};return e.forEach(function(e){var n=e.name,r=e.type,i=e.live,o=void 0;o="event"===r?h.toTopicName(t.auth.appId,e.userId,n,r):h.toTopicName(t.auth.appId,t.userId,n,r),s[o]=i?0:1}),this.client.subscribe(s,this.subAckCallback.bind(this))}},{key:w,value:function(e){var t=this;Array.isArray(e)||(e=[e]);var n=[],r=e.map(function(e){return e.name}),i=h.getAllStoredChannels(),o=i.filter(function(e){return-1===r.indexOf(e)});h.updateStorage("channels",o);var s=this[A]("$omit_token",null);if(!s.id){var a=new Error("Chabok error: user is not registered");return a.code=105,Promise.reject(a)}return s.subscriptions=o,this[O](s).then(function(e){}).catch(function(e){}),e.forEach(function(e){var r=e.name,i=e.type,o=void 0;o="event"===i?h.toTopicName(t.auth.appId,e.userId,r,i):h.toTopicName(t.auth.appId,t.userId,r,i),n.push(o)}),this.client.unsubscribe(n,this.errorHandler.bind(this))}},{key:k,value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.every(function(e){return"string"==typeof e})){var i=new Error("Chabok error: invalid tag value");return i.code=108,Promise.reject(i)}var o=this.getUserId();if(!o){var s=new Error("Chabok error: user is not registered");return s.code=105,Promise.reject(s)}var a={userId:o,tags:n};return this.webClient.post("installations/"+e,a).then(function(e){return e&&e.data?{count:e.data.count||0}:{count:0}})}},{key:T,value:function(e,t){var n=this;return new Promise(function(r,i){if(!h.isValidUserId(e)){var o=new Error("Chabok error: invalid userId");return o.code=103,i(o)}var s=n.getUserId();if(n.isRegistered()&&n.getUserId()!==e){var a=h.getStorageKey("guestUserId");n[x](),h.updateStorage("reregisteredFrom",s),a&&h.updateStorage("guestUserId",a)}s!==e&&h.updateStorage("registerTs",Date.now()),n.userId=e;var u=n.auth.appId,c=n.config.webpush;if(!u){var l=new Error("Chabok error: invalid appId");return l.code=101,i(l)}return new Promise(function(t,r){return c.enabled?(n.push.once("tokenSubscription",function(r,i){return t(n[P](u,e,r,i))}),n.push.requestToken({publicKey:n.config.webpush.publicKey})):t(n[A]())}).then(function(e){t&&(e.tags=t),r(e.id?n[O](e):n[I](e))})})}}]),t}(f);t.Chabok=B},function(e,t,n){"use strict";var r={object:!0,symbol:!0};e.exports=function(){var e;if("function"!=typeof Symbol)return!1;e=Symbol("test symbol");try{String(e)}catch(e){return!1}return!!r[typeof Symbol.iterator]&&(!!r[typeof Symbol.toPrimitive]&&!!r[typeof Symbol.toStringTag])}},function(e,t,n){"use strict";var r,i,o,s,a=n(8),u=n(68),c=Object.create,l=Object.defineProperties,f=Object.defineProperty,h=Object.prototype,p=c(null);if("function"==typeof Symbol){r=Symbol;try{String(r()),s=!0}catch(e){}}var d=function(){var e=c(null);return function(t){for(var n,r,i=0;e[t+(i||"")];)++i;return t+=i||"",e[t]=!0,n="@@"+t,f(h,n,a.gs(null,function(e){r||(r=!0,f(this,n,a(e)),r=!1)})),n}}();o=function(e){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return i(e)},e.exports=i=function e(t){var n;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return s?r(t):(n=c(o.prototype),t=void 0===t?"":String(t),l(n,{__description__:a("",t),__name__:a("",d(t))}))},l(i,{for:a(function(e){return p[e]?p[e]:p[e]=i(String(e))}),keyFor:a(function(e){var t;u(e);for(t in p)if(p[t]===e)return t}),hasInstance:a("",r&&r.hasInstance||i("hasInstance")),isConcatSpreadable:a("",r&&r.isConcatSpreadable||i("isConcatSpreadable")),iterator:a("",r&&r.iterator||i("iterator")),match:a("",r&&r.match||i("match")),replace:a("",r&&r.replace||i("replace")),search:a("",r&&r.search||i("search")),species:a("",r&&r.species||i("species")),split:a("",r&&r.split||i("split")),toPrimitive:a("",r&&r.toPrimitive||i("toPrimitive")),toStringTag:a("",r&&r.toStringTag||i("toStringTag")),unscopables:a("",r&&r.unscopables||i("unscopables"))}),l(o.prototype,{constructor:a(i),toString:a("",function(){return this.__name__})}),l(i.prototype,{toString:a(function(){return"Symbol ("+u(this).__description__+")"}),valueOf:a(function(){return u(this)})}),f(i.prototype,i.toPrimitive,a("",function(){var e=u(this);return"symbol"==typeof e?e:e.toString()})),f(i.prototype,i.toStringTag,a("c","Symbol")),f(o.prototype,i.toStringTag,a("c",i.prototype[i.toStringTag])),f(o.prototype,i.toPrimitive,a("c",i.prototype[i.toPrimitive]))},function(e,t,n){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,n){"use strict";var r=n(62),i=n(2),o=Math.max;e.exports=function(e,t){var n,s,a,u=o(arguments.length,2);for(e=Object(i(e)),a=function(r){try{e[r]=t[r]}catch(e){n||(n=e)}},s=1;s<u;++s)t=arguments[s],r(t).forEach(a);if(void 0!==n)throw n;return e}},function(e,t,n){"use strict";e.exports=n(63)()?Object.keys:n(64)},function(e,t,n){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,n){"use strict";var r=n(11),i=Object.keys;e.exports=function(e){return i(r(e)?Object(e):e)}},function(e,t,n){"use strict";e.exports=function(e){return"function"==typeof e}},function(e,t,n){"use strict";var r="razdwatrzy";e.exports=function(){return"function"==typeof r.contains&&(!0===r.contains("dwa")&&!1===r.contains("foo"))}},function(e,t,n){"use strict";var r=String.prototype.indexOf;e.exports=function(e){return r.call(this,e,arguments[1])>-1}},function(e,t,n){"use strict";var r=n(69);e.exports=function(e){if(!r(e))throw new TypeError(e+" is not a symbol");return e}},function(e,t,n){"use strict";e.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&("Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag]))}},function(e,t,n){e.exports=n(71)},function(e,t,n){"use strict";function r(e){var t=new s(e),n=o(s.prototype.request,t);return i.extend(n,s.prototype,t),i.extend(n,t),n}var i=n(1),o=n(28),s=n(73),a=n(20),u=r(a);u.Axios=s,u.create=function(e){return r(i.merge(a,e))},u.Cancel=n(32),u.CancelToken=n(87),u.isCancel=n(31),u.all=function(e){return Promise.all(e)},u.spread=n(88),e.exports=u,e.exports.default=u},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function r(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(n(e)||r(e)||!!e._isBuffer)}},function(e,t,n){"use strict";function r(e){this.defaults=e,this.interceptors={request:new s,response:new s}}var i=n(20),o=n(1),s=n(82),a=n(83);r.prototype.request=function(e){"string"==typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),e=o.merge(i,this.defaults,{method:"get"},e),e.method=e.method.toLowerCase();var t=[a,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},o.forEach(["delete","get","head","options"],function(e){r.prototype[e]=function(t,n){return this.request(o.merge(n||{},{method:e,url:t}))}}),o.forEach(["post","put","patch"],function(e){r.prototype[e]=function(t,n,r){return this.request(o.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=r},function(e,t,n){"use strict";var r=n(1);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){"use strict";var r=n(30);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e}},function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=n(1);e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(i.isURLSearchParams(t))o=t.toString();else{var s=[];i.forEach(t,function(e,t){null!==e&&void 0!==e&&(i.isArray(e)&&(t+="[]"),i.isArray(e)||(e=[e]),i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),s.push(r(t)+"="+r(e))}))}),o=s.join("&")}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}},function(e,t,n){"use strict";var r=n(1),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,s={};return e?(r.forEach(e.split("\n"),function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(s[t]&&i.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}}),s):s}},function(e,t,n){"use strict";var r=n(1);e.exports=r.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(i.setAttribute("href",t),t=i.href),i.setAttribute("href",t),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return t=e(window.location.href),function(n){var i=r.isString(n)?e(n):n;return i.protocol===t.protocol&&i.host===t.host}}():function(){return function(){return!0}}()},function(e,t,n){"use strict";function r(){this.message="String contains an invalid character"}function i(e){for(var t,n,i=String(e),s="",a=0,u=o;i.charAt(0|a)||(u="=",a%1);s+=u.charAt(63&t>>8-a%1*8)){if((n=i.charCodeAt(a+=.75))>255)throw new r;t=t<<8|n}return s}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",e.exports=i},function(e,t,n){"use strict";var r=n(1);e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,i,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,n){"use strict";function r(){this.handlers=[]}var i=n(1);r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},function(e,t,n){"use strict";function r(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var i=n(1),o=n(84),s=n(31),a=n(20),u=n(85),c=n(86);e.exports=function(e){return r(e),e.baseURL&&!u(e.url)&&(e.url=c(e.baseURL,e.url)),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||a.adapter)(e).then(function(t){return r(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(t){return s(t)||(r(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){"use strict";var r=n(1);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new i(e),t(n.reason))})}var i=n(32);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r(function(t){e=t}),cancel:e}},e.exports=r},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";(function(t){function r(e){var t;e.auth&&(t=e.auth.match(/^(.+):(.+)$/),t?(e.username=t[1],e.password=t[2]):e.username=e.auth)}function i(e,t){function n(e){return t.servers&&(e._reconnectCount&&e._reconnectCount!==t.servers.length||(e._reconnectCount=0),t.host=t.servers[e._reconnectCount].host,t.port=t.servers[e._reconnectCount].port,t.protocol=t.servers[e._reconnectCount].protocol?t.servers[e._reconnectCount].protocol:t.defaultProtocol,t.hostname=t.host,e._reconnectCount++),c[t.protocol](e,t)}if("object"!=typeof e||t||(t=e,e=null),t=t||{},e){var i=a.parse(e,!0);if(null!=i.port&&(i.port=Number(i.port)),t=u(i,t),null===t.protocol)throw new Error("Missing protocol");t.protocol=t.protocol.replace(/:$/,"")}if(r(t),t.query&&"string"==typeof t.query.clientId&&(t.clientId=t.query.clientId),t.cert&&t.key){if(!t.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs"].indexOf(t.protocol))switch(t.protocol){case"mqtt":t.protocol="mqtts";break;case"ws":t.protocol="wss";break;case"wx":t.protocol="wxs";break;default:throw new Error('Unknown protocol for secure connection: "'+t.protocol+'"!')}}if(!c[t.protocol]){var s=-1!==["mqtts","wss"].indexOf(t.protocol);t.protocol=["mqtt","mqtts","ws","wss","wx","wxs"].filter(function(e,t){return(!s||t%2!=0)&&"function"==typeof c[e]})[0]}if(!1===t.clean&&!t.clientId)throw new Error("Missing clientId for unclean clients");return t.protocol&&(t.defaultProtocol=t.protocol),new o(n,t)}var o=n(90),s=n(33),a=n(49),u=n(21),c={};"browser"!==t.title?(c.mqtt=n(51),c.tcp=n(51),c.ssl=n(24),c.tls=n(24),c.mqtts=n(24)):(c.wx=n(52),c.wxs=n(52)),c.ws=n(54),c.wss=n(54),e.exports=i,e.exports.connect=i,e.exports.MqttClient=o,e.exports.Store=s}).call(t,n(0))},function(e,t,n){"use strict";(function(t,r){function i(){return"mqttjs_"+Math.random().toString(16).substr(2,8)}function o(e,t,n){e.emit("packetsend",t),!p.writeToStream(t,e.stream)&&n?e.stream.once("drain",n):n&&n()}function s(e){e&&Object.keys(e).forEach(function(t){"function"==typeof e[t]&&(e[t](new Error("Connection closed")),delete e[t])})}function a(e,t,n){e.outgoingStore.put(t,function(r){if(r)return n&&n(r);o(e,t,n)})}function u(){}function c(e,t){var n,r=this;if(!(this instanceof c))return new c(e,t);this.options=t||{};for(n in _)void 0===this.options[n]?this.options[n]=_[n]:this.options[n]=t[n];this.options.clientId="string"==typeof this.options.clientId?this.options.clientId:i(),this.streamBuilder=e,this.outgoingStore=this.options.outgoingStore||new f,this.incomingStore=this.options.incomingStore||new f,this.queueQoSZero=void 0===this.options.queueQoSZero||this.options.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this.nextId=Math.max(1,Math.floor(65535*Math.random())),this.outgoing={},this.on("connect",function(){function e(){n.destroy(),n=null}function t(){if(n){var e,i=n.read(1);if(!i)return void n.once("readable",t);r.disconnecting||r.reconnectTimer?n.destroy&&n.destroy():(e=r.outgoing[i.messageId],r.outgoing[i.messageId]=function(n,r){e&&e(n,r),t()},r._sendPacket(i))}}if(!this.disconnected){this.connected=!0;var n=this.outgoingStore.createStream();this.once("close",e),n.on("end",function(){r.removeListener("close",e)}),n.on("error",function(t){r.removeListener("close",e),r.emit("error",t)}),t()}}),this.on("close",function(){this.connected=!1,clearTimeout(this.connackTimer)}),this.on("connect",this._setupPingTimer),this.on("connect",function(){function e(){var n=t.shift(),i=null;n&&(i=n.packet,r._sendPacket(i,function(t){n.cb&&n.cb(t),e()}))}var t=this.queue;e()});var o=!0;this.on("connect",function(){!o&&this.options.clean&&Object.keys(this._resubscribeTopics).length>0&&(this.options.resubscribe?(this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics)):this._resubscribeTopics={}),o=!1}),this.on("close",function(){null!==r.pingTimer&&(r.pingTimer.clear(),r.pingTimer=null)}),this.on("close",this._setupReconnect),l.EventEmitter.call(this),this._setupStream()}var l=n(9),f=n(33),h=n(46),p=n(134),d=n(14).Writable,g=n(5),b=n(143),y=n(144),v=n(21),m=t.setImmediate||function(e){r.nextTick(e)},_={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0};g(c,l.EventEmitter),c.prototype._setupStream=function(){function e(){r.nextTick(t)}function t(){var t=l.shift(),n=c;t?i._handlePacket(t,e):(c=null,n())}var n,i=this,s=new d,a=p.parser(this.options),c=null,l=[];this._clearReconnect(),this.stream=this.streamBuilder(this),a.on("packet",function(e){l.push(e)}),s._write=function(e,n,r){c=r,a.parse(e),t()},this.stream.pipe(s),this.stream.on("error",u),h(this.stream,this.emit.bind(this,"close")),n=Object.create(this.options),n.cmd="connect",o(this,n),a.on("error",this.emit.bind(this,"error")),this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){i._cleanUp(!0)},this.options.connectTimeout)},c.prototype._handlePacket=function(e,t){switch(this.emit("packetreceive",e),e.cmd){case"publish":this._handlePublish(e,t);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(e),t();break;case"pubrel":this._handlePubrel(e,t);break;case"connack":this._handleConnack(e),t();break;case"pingresp":this._handlePingresp(e),t()}},c.prototype._checkDisconnecting=function(e){return this.disconnecting&&(e?e(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},c.prototype.publish=function(e,t,n,r){var i;if("function"==typeof n&&(r=n,n=null),n=v({qos:0,retain:!1,dup:!1},n),this._checkDisconnecting(r))return this;switch(i={cmd:"publish",topic:e,payload:t,qos:n.qos,retain:n.retain,messageId:this._nextId(),dup:n.dup},n.qos){case 1:case 2:this.outgoing[i.messageId]=r||u,this._sendPacket(i);break;default:this._sendPacket(i,r)}return this},c.prototype.subscribe=function(){var e,t,n=Array.prototype.slice.call(arguments),r=[],i=n.shift(),o=i.resubscribe,s=n.pop()||u,a=n.pop(),c=this;if(delete i.resubscribe,"string"==typeof i&&(i=[i]),"function"!=typeof s&&(a=s,s=u),null!==(t=y.validateTopics(i)))return m(s,new Error("Invalid topic "+t)),this;if(this._checkDisconnecting(s))return this;if(a=v({qos:0},a),Array.isArray(i)?i.forEach(function(e){(c._resubscribeTopics[e]<a.qos||!c._resubscribeTopics.hasOwnProperty(e)||o)&&r.push({topic:e,qos:a.qos})}):Object.keys(i).forEach(function(e){(c._resubscribeTopics[e]<i[e]||!c._resubscribeTopics.hasOwnProperty(e)||o)&&r.push({topic:e,qos:i[e]})}),e={cmd:"subscribe",subscriptions:r,qos:1,retain:!1,dup:!1,messageId:this._nextId()},!r.length)return void s(null,[]);if(this.options.resubscribe){var l=[];r.forEach(function(e){c.options.reconnectPeriod>0&&(c._resubscribeTopics[e.topic]=e.qos,l.push(e.topic))}),c.messageIdToTopic[e.messageId]=l}return this.outgoing[e.messageId]=function(e,t){if(!e)for(var n=t.granted,i=0;i<n.length;i+=1)r[i].qos=n[i];s(e,r)},this._sendPacket(e),this},c.prototype.unsubscribe=function(e,t){var n={cmd:"unsubscribe",qos:1,messageId:this._nextId()},r=this;return t=t||u,this._checkDisconnecting(t)?this:("string"==typeof e?n.unsubscriptions=[e]:"object"==typeof e&&e.length&&(n.unsubscriptions=e),this.options.resubscribe&&n.unsubscriptions.forEach(function(e){delete r._resubscribeTopics[e]}),this.outgoing[n.messageId]=t,this._sendPacket(n),this)},c.prototype.end=function(e,t){function n(){i.disconnected=!0,i.incomingStore.close(function(){i.outgoingStore.close(function(){t&&t.apply(null,arguments),i.emit("end")})}),i._deferredReconnect&&i._deferredReconnect()}function r(){i._cleanUp(e,m.bind(null,n))}var i=this;return"function"==typeof e&&(t=e,e=!1),this.disconnecting?this:(this._clearReconnect(),this.disconnecting=!0,!e&&Object.keys(this.outgoing).length>0?this.once("outgoingEmpty",setTimeout.bind(null,r,10)):r(),this)},c.prototype.removeOutgoingMessage=function(e){var t=this.outgoing[e];return delete this.outgoing[e],this.outgoingStore.del({messageId:e},function(){t(new Error("Message removed"))}),this},c.prototype.reconnect=function(e){var t=this,n=function(){e?(t.options.incomingStore=e.incomingStore,t.options.outgoingStore=e.outgoingStore):(t.options.incomingStore=null,t.options.outgoingStore=null),t.incomingStore=t.options.incomingStore||new f,t.outgoingStore=t.options.outgoingStore||new f,t.disconnecting=!1,t.disconnected=!1,t._deferredReconnect=null,t._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=n:n(),this},c.prototype._reconnect=function(){this.emit("reconnect"),this._setupStream()},c.prototype._setupReconnect=function(){var e=this;!e.disconnecting&&!e.reconnectTimer&&e.options.reconnectPeriod>0&&(this.reconnecting||(this.emit("offline"),this.reconnecting=!0),e.reconnectTimer=setInterval(function(){e._reconnect()},e.options.reconnectPeriod))},c.prototype._clearReconnect=function(){this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},c.prototype._cleanUp=function(e,t){t&&this.stream.on("close",t),e?(0===this.options.reconnectPeriod&&this.options.clean&&s(this.outgoing),this.stream.destroy()):this._sendPacket({cmd:"disconnect"},m.bind(null,this.stream.end.bind(this.stream))),this.disconnecting||(this._clearReconnect(),this._setupReconnect()),null!==this.pingTimer&&(this.pingTimer.clear(),this.pingTimer=null),t&&!this.connected&&(this.stream.removeListener("close",t),t())},c.prototype._sendPacket=function(e,t){if(!this.connected)return void(0===(e.qos||0)&&this.queueQoSZero||"publish"!==e.cmd?this.queue.push({packet:e,cb:t}):e.qos>0?(t=this.outgoing[e.messageId],this.outgoingStore.put(e,function(e){if(e)return t&&t(e)})):t&&t(new Error("No connection to broker")));switch(this._shiftPingInterval(),e.cmd){case"publish":break;case"pubrel":return void a(this,e,t);default:return void o(this,e,t)}switch(e.qos){case 2:case 1:a(this,e,t);break;case 0:default:o(this,e,t)}},c.prototype._setupPingTimer=function(){var e=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=b(function(){e._checkPing()},1e3*this.options.keepalive))},c.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},c.prototype._checkPing=function(){this.pingResp?(this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):this._cleanUp(!0)},c.prototype._handlePingresp=function(){this.pingResp=!0},c.prototype._handleConnack=function(e){var t=e.returnCode,n=["","Unacceptable protocol version","Identifier rejected","Server unavailable","Bad username or password","Not authorized"];if(clearTimeout(this.connackTimer),0===t)this.reconnecting=!1,this.emit("connect",e);else if(t>0){var r=new Error("Connection refused: "+n[t]);r.code=t,this.emit("error",r)}},c.prototype._handlePublish=function(e,t){t=void 0!==t?t:u;var n=e.topic.toString(),r=e.payload,i=e.qos,o=e.messageId,s=this;switch(i){case 2:this.incomingStore.put(e,function(e){if(e)return t(e);s._sendPacket({cmd:"pubrec",messageId:o},t)});break;case 1:this.emit("message",n,r,e),this.handleMessage(e,function(e){if(e)return t(e);s._sendPacket({cmd:"puback",messageId:o},t)});break;case 0:this.emit("message",n,r,e),this.handleMessage(e,t)}},c.prototype.handleMessage=function(e,t){t()},c.prototype._handleAck=function(e){var t=e.messageId,n=e.cmd,r=null,i=this.outgoing[t],o=this;if(i){switch(n){case"pubcomp":case"puback":delete this.outgoing[t],this.outgoingStore.del(e,i);break;case"pubrec":r={cmd:"pubrel",qos:2,messageId:t},this._sendPacket(r);break;case"suback":if(delete this.outgoing[t],1===e.granted.length&&0!=(128&e.granted[0])){var s=this.messageIdToTopic[t];s&&s.forEach(function(e){delete o._resubscribeTopics[e]})}i(null,e);break;case"unsuback":delete this.outgoing[t],i(null);break;default:o.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&0===Object.keys(this.outgoing).length&&this.emit("outgoingEmpty")}},c.prototype._handlePubrel=function(e,t){t=void 0!==t?t:u;var n=e.messageId,r=this,i={cmd:"pubcomp",messageId:n};r.incomingStore.get(e,function(n,o){n||"pubrel"===o.cmd?r._sendPacket(i,t):(r.emit("message",o.topic,o.payload,o),r.incomingStore.put(e,function(e){if(e)return t(e);r.handleMessage(o,function(e){if(e)return t(e);r._sendPacket(i,t)})}))})},c.prototype._nextId=function(){var e=this.nextId++;return 65536===this.nextId&&(this.nextId=1),e},c.prototype.getLastMessageId=function(){return 1===this.nextId?65535:this.nextId-1},e.exports=c}).call(t,n(3),n(0))},function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function i(e){var t=r(e),n=t[0],i=t[1];return 3*(n+i)/4-i}function o(e,t,n){return 3*(t+n)/4-n}function s(e){for(var t,n=r(e),i=n[0],s=n[1],a=new h(o(e,i,s)),u=0,c=s>0?i-4:i,l=0;l<c;l+=4)t=f[e.charCodeAt(l)]<<18|f[e.charCodeAt(l+1)]<<12|f[e.charCodeAt(l+2)]<<6|f[e.charCodeAt(l+3)],a[u++]=t>>16&255,a[u++]=t>>8&255,a[u++]=255&t;return 2===s&&(t=f[e.charCodeAt(l)]<<2|f[e.charCodeAt(l+1)]>>4,a[u++]=255&t),1===s&&(t=f[e.charCodeAt(l)]<<10|f[e.charCodeAt(l+1)]<<4|f[e.charCodeAt(l+2)]>>2,a[u++]=t>>8&255,a[u++]=255&t),a}function a(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}function u(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(a(r));return i.join("")}function c(e){for(var t,n=e.length,r=n%3,i=[],o=0,s=n-r;o<s;o+=16383)i.push(u(e,o,o+16383>s?s:o+16383));return 1===r?(t=e[n-1],i.push(l[t>>2]+l[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(l[t>>10]+l[t>>4&63]+l[t<<2&63]+"=")),i.join("")}t.byteLength=i,t.toByteArray=s,t.fromByteArray=c;for(var l=[],f=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,g=p.length;d<g;++d)l[d]=p[d],f[p.charCodeAt(d)]=d;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,p=e[t+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+e[t+f],f+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=c}return(p?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),t+=s+f>=1?h/u:h*Math.pow(2,1-f),t*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(t*u-1)*Math.pow(2,i),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[n+p]=255&s,p+=d,s/=256,c-=8);e[n+p-d]|=128*g}},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){e.copy(t,n)}var o=n(4).Buffer,s=n(95);e.exports=function(){function e(){r(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var t=o.allocUnsafe(e>>>0),n=this.head,r=0;n;)i(n.data,t,r),r+=n.data.length,n=n.next;return t},e}(),s&&s.inspect&&s.inspect.custom&&(e.exports.prototype[s.inspect.custom]=function(){var e=s.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,n){(function(e){function r(e,t){this._id=e,this._clearFn=t}var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(97),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(t,n(3))},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return c[u]=r,a(u),u++}function i(e){delete c[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function s(e){if(l)setTimeout(s,0,e);else{var t=c[e];if(t){l=!0;try{o(t)}finally{i(e),l=!1}}}}if(!e.setImmediate){var a,u=1,c={},l=!1,f=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?function(){a=function(e){t.nextTick(function(){s(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&s(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),a=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){s(e.data)},a=function(t){e.port2.postMessage(t)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var e=f.documentElement;a=function(t){var n=f.createElement("script");n.onreadystatechange=function(){s(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){a=function(e){setTimeout(s,0,e)}}(),h.setImmediate=r,h.clearImmediate=i}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(3),n(0))},function(e,t,n){(function(t){function n(e,t){function n(){if(!i){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation"),i=!0}return e.apply(this,arguments)}if(r("noDeprecation"))return e;var i=!1;return n}function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=n}).call(t,n(3))},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);i.call(this,e)}e.exports=r;var i=n(40),o=n(13);o.inherits=n(5),o.inherits(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){"use strict";e.exports=n(101)()?Map:n(102)},function(e,t,n){"use strict";e.exports=function(){var e,t,n;if("function"!=typeof Map)return!1;try{e=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(e){return!1}return"[object Map]"===String(e)&&(3===e.size&&("function"==typeof e.clear&&("function"==typeof e.delete&&("function"==typeof e.entries&&("function"==typeof e.forEach&&("function"==typeof e.get&&("function"==typeof e.has&&("function"==typeof e.keys&&("function"==typeof e.set&&("function"==typeof e.values&&(t=e.entries(),n=t.next(),!1===n.done&&(!!n.value&&("raz"===n.value[0]&&"one"===n.value[1])))))))))))))}},function(e,t,n){"use strict";var r,i=n(41),o=n(103),s=n(15),a=n(7),u=n(2),c=n(8),l=n(113),f=n(6),h=n(45),p=n(115),d=n(128),g=n(131),b=Function.prototype.call,y=Object.defineProperties,v=Object.getPrototypeOf;e.exports=r=function(){var e,t,n,i=arguments[0];if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");return n=g&&s&&Map!==r?s(new Map,v(this)):this,null!=i&&h(i),y(n,{__mapKeysData__:c("c",e=[]),__mapValuesData__:c("c",t=[])}),i?(p(i,function(n){var r=u(n)[0];n=n[1],-1===o.call(e,r)&&(e.push(r),t.push(n))},n),n):n},g&&(s&&s(r,Map),r.prototype=Object.create(Map.prototype,{constructor:c(r)})),l(y(r.prototype,{clear:c(function(){this.__mapKeysData__.length&&(i.call(this.__mapKeysData__),i.call(this.__mapValuesData__),this.emit("_clear"))}),delete:c(function(e){var t=o.call(this.__mapKeysData__,e);return-1!==t&&(this.__mapKeysData__.splice(t,1),this.__mapValuesData__.splice(t,1),this.emit("_delete",t,e),!0)}),entries:c(function(){return new d(this,"key+value")}),forEach:c(function(e){var t,n,r=arguments[1];for(a(e),t=this.entries(),n=t._next();void 0!==n;)b.call(e,r,this.__mapValuesData__[n],this.__mapKeysData__[n],this),n=t._next()}),get:c(function(e){var t=o.call(this.__mapKeysData__,e);if(-1!==t)return this.__mapValuesData__[t]}),has:c(function(e){return-1!==o.call(this.__mapKeysData__,e)}),keys:c(function(){return new d(this,"key")}),set:c(function(e,t){var n,r=o.call(this.__mapKeysData__,e);return-1===r&&(r=this.__mapKeysData__.push(e)-1,n=!0),this.__mapValuesData__[r]=t,n&&this.emit("_add",r,e),this}),size:c.gs(function(){return this.__mapKeysData__.length}),values:c(function(){return new d(this,"value")}),toString:c(function(){return"[object Map]"})})),Object.defineProperty(r.prototype,f.iterator,c(function(){return this.entries()})),Object.defineProperty(r.prototype,f.toStringTag,c("c","Map"))},function(e,t,n){"use strict";var r=n(104),i=n(42),o=n(2),s=Array.prototype.indexOf,a=Object.prototype.hasOwnProperty,u=Math.abs,c=Math.floor;e.exports=function(e){var t,n,l,f;if(!r(e))return s.apply(this,arguments);for(n=i(o(this).length),l=arguments[1],l=isNaN(l)?0:l>=0?c(l):i(this.length)-c(u(l)),t=l;t<n;++t)if(a.call(this,t)&&(f=this[t],r(f)))return t;return-1}},function(e,t,n){"use strict";e.exports=n(105)()?Number.isNaN:n(106)},function(e,t,n){"use strict";e.exports=function(){var e=Number.isNaN;return"function"==typeof e&&(!e({})&&e(NaN)&&!e(34))}},function(e,t,n){"use strict";e.exports=function(e){return e!==e}},function(e,t,n){"use strict";var r=n(108),i=Math.abs,o=Math.floor;e.exports=function(e){return isNaN(e)?0:(e=Number(e),0!==e&&isFinite(e)?r(e)*o(i(e)):e)}},function(e,t,n){"use strict";e.exports=n(109)()?Math.sign:n(110)},function(e,t,n){"use strict";e.exports=function(){var e=Math.sign;return"function"==typeof e&&(1===e(10)&&-1===e(-20))}},function(e,t,n){"use strict";e.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1}},function(e,t,n){"use strict";var r=n(11),i={function:!0,object:!0};e.exports=function(e){return r(e)&&i[typeof e]||!1}},function(e,t,n){"use strict";var r,i=Object.create;n(43)()||(r=n(44)),e.exports=function(){var e,t,n;return r?1!==r.level?i:(e={},t={},n={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(e){if("__proto__"===e)return void(t[e]={configurable:!0,enumerable:!1,writable:!0,value:void 0});t[e]=n}),Object.defineProperties(e,t),Object.defineProperty(r,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:e}),function(t,n){return i(null===t?e:t,n)}):i}()},function(e,t,n){"use strict";var r,i,o,s,a,u,c,l=n(8),f=n(7),h=Function.prototype.apply,p=Function.prototype.call,d=Object.create,g=Object.defineProperty,b=Object.defineProperties,y=Object.prototype.hasOwnProperty,v={configurable:!0,enumerable:!1,writable:!0};r=function(e,t){var n;return f(t),y.call(this,"__ee__")?n=this.__ee__:(n=v.value=d(null),g(this,"__ee__",v),v.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},i=function(e,t){var n,i;return f(t),i=this,r.call(this,e,n=function(){o.call(i,e,n),h.call(t,this,arguments)}),n.__eeOnceListener__=t,this},o=function(e,t){var n,r,i,o;if(f(t),!y.call(this,"__ee__"))return this;if(n=this.__ee__,!n[e])return this;if("object"==typeof(r=n[e]))for(o=0;i=r[o];++o)i!==t&&i.__eeOnceListener__!==t||(2===r.length?n[e]=r[o?0:1]:r.splice(o,1));else r!==t&&r.__eeOnceListener__!==t||delete n[e];return this},s=function(e){var t,n,r,i,o;if(y.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"==typeof i){for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];for(i=i.slice(),t=0;r=i[t];++t)h.call(r,this,o)}else switch(arguments.length){case 1:p.call(i,this);break;case 2:p.call(i,this,arguments[1]);break;case 3:p.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];h.call(i,this,o)}},a={on:r,once:i,off:o,emit:s},u={on:l(r),once:l(i),off:l(o),emit:l(s)},c=b({},u),e.exports=t=function(e){return null==e?d(c):b(Object(e),u)},t.methods=a},function(e,t,n){"use strict";var r=n(16),i=n(11),o=n(17),s=n(6).iterator,a=Array.isArray;e.exports=function(e){return!!i(e)&&(!!a(e)||(!!o(e)||(!!r(e)||"function"==typeof e[s])))}},function(e,t,n){"use strict";var r=n(16),i=n(7),o=n(17),s=n(116),a=Array.isArray,u=Function.prototype.call,c=Array.prototype.some;e.exports=function(e,t){var n,l,f,h,p,d,g,b,y=arguments[2];if(a(e)||r(e)?n="array":o(e)?n="string":e=s(e),i(t),f=function(){h=!0},"array"===n)return void c.call(e,function(e){return u.call(t,y,e,f),h});if("string"!==n)for(l=e.next();!l.done;){if(u.call(t,y,l.value,f),h)return;l=e.next()}else for(d=e.length,p=0;p<d&&(g=e[p],p+1<d&&(b=g.charCodeAt(0))>=55296&&b<=56319&&(g+=e[++p]),u.call(t,y,g,f),!h);++p);}},function(e,t,n){"use strict";var r=n(16),i=n(17),o=n(117),s=n(127),a=n(45),u=n(6).iterator;e.exports=function(e){return"function"==typeof a(e)[u]?e[u]():r(e)?new o(e):i(e)?new s(e):new o(e)}},function(e,t,n){"use strict";var r,i=n(15),o=n(27),s=n(8),a=n(6),u=n(23),c=Object.defineProperty;r=e.exports=function(e,t){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");u.call(this,e),t=t?o.call(t,"key+value")?"key+value":o.call(t,"key")?"key":"value":"value",c(this,"__kind__",s("",t))},i&&i(r,u),delete r.prototype.constructor,r.prototype=Object.create(u.prototype,{_resolve:s(function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e})}),c(r.prototype,a.toStringTag,s("c","Array Iterator"))},function(e,t,n){"use strict";var r,i=n(119),o=n(26),s=n(7),a=n(124),u=n(7),c=n(2),l=Function.prototype.bind,f=Object.defineProperty,h=Object.prototype.hasOwnProperty;r=function(e,t,n){var r,o=c(t)&&u(t.value);return r=i(t),delete r.writable,delete r.value,r.get=function(){return!n.overwriteDefinition&&h.call(this,e)?o:(t.value=l.call(o,n.resolveContext?n.resolveContext(this):this),f(this,e,t),this[e])},r},e.exports=function(e){var t=o(arguments[1]);return null!=t.resolveContext&&s(t.resolveContext),a(e,function(e,n){return r(n,e,t)})}},function(e,t,n){"use strict";var r=n(120),i=n(19),o=n(2);e.exports=function(e){var t=Object(o(e)),n=arguments[1],s=Object(arguments[2]);if(t!==e&&!n)return t;var a={};return n?r(n,function(t){(s.ensure||t in e)&&(a[t]=e[t])}):i(a,e),a}},function(e,t,n){"use strict";e.exports=n(121)()?Array.from:n(122)},function(e,t,n){"use strict";e.exports=function(){var e,t,n=Array.from;return"function"==typeof n&&(e=["raz","dwa"],t=n(e),Boolean(t&&t!==e&&"dwa"===t[1]))}},function(e,t,n){"use strict";var r=n(6).iterator,i=n(16),o=n(123),s=n(42),a=n(7),u=n(2),c=n(11),l=n(17),f=Array.isArray,h=Function.prototype.call,p={configurable:!0,enumerable:!0,writable:!0,value:null},d=Object.defineProperty;e.exports=function(e){var t,n,g,b,y,v,m,_,w,S,E=arguments[1],k=arguments[2];if(e=Object(u(e)),c(E)&&a(E),this&&this!==Array&&o(this))t=this;else{if(!E){if(i(e))return 1!==(y=e.length)?Array.apply(null,e):(b=new Array(1),b[0]=e[0],b);if(f(e)){for(b=new Array(y=e.length),n=0;n<y;++n)b[n]=e[n];return b}}b=[]}if(!f(e))if(void 0!==(w=e[r])){for(m=a(w).call(e),t&&(b=new t),_=m.next(),n=0;!_.done;)S=E?h.call(E,k,_.value,n):_.value,t?(p.value=S,d(b,n,p)):b[n]=S,_=m.next(),++n;y=n}else if(l(e)){for(y=e.length,t&&(b=new t),n=0,g=0;n<y;++n)S=e[n],n+1<y&&(v=S.charCodeAt(0))>=55296&&v<=56319&&(S+=e[++n]),S=E?h.call(E,k,S,g):S,t?(p.value=S,d(b,g,p)):b[g]=S,++g;y=g}if(void 0===y)for(y=s(e.length),t&&(b=new t(y)),n=0;n<y;++n)S=E?h.call(E,k,e[n],n):e[n],t?(p.value=S,d(b,n,p)):b[n]=S;return t&&(p.value=null,b.length=y),b}},function(e,t,n){"use strict";var r=Object.prototype.toString,i=r.call(n(25));e.exports=function(e){return"function"==typeof e&&r.call(e)===i}},function(e,t,n){"use strict";var r=n(7),i=n(125),o=Function.prototype.call;e.exports=function(e,t){var n={},s=arguments[2];return r(t),i(e,function(e,r,i,a){n[r]=o.call(t,s,e,r,i,a)}),n}},function(e,t,n){"use strict";e.exports=n(126)("forEach")},function(e,t,n){"use strict";var r=n(7),i=n(2),o=Function.prototype.bind,s=Function.prototype.call,a=Object.keys,u=Object.prototype.propertyIsEnumerable;e.exports=function(e,t){return function(n,c){var l,f=arguments[2],h=arguments[3];return n=Object(i(n)),r(c),l=a(n),h&&l.sort("function"==typeof h?o.call(h,n):void 0),"function"!=typeof e&&(e=l[e]),s.call(e,l,function(e,r){return u.call(n,e)?s.call(c,f,n[e],e,n,r):t})}}},function(e,t,n){"use strict";var r,i=n(15),o=n(8),s=n(6),a=n(23),u=Object.defineProperty;r=e.exports=function(e){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");e=String(e),a.call(this,e),u(this,"__length__",o("",e.length))},i&&i(r,a),delete r.prototype.constructor,r.prototype=Object.create(a.prototype,{_next:o(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:o(function(e){var t,n=this.__list__[e];return this.__nextIndex__===this.__length__?n:(t=n.charCodeAt(0),t>=55296&&t<=56319?n+this.__list__[this.__nextIndex__++]:n)})}),u(r.prototype,s.toStringTag,o("c","String Iterator"))},function(e,t,n){"use strict";var r,i=n(15),o=n(8),s=n(23),a=n(6).toStringTag,u=n(129),c=Object.defineProperties,l=s.prototype._unBind;r=e.exports=function(e,t){if(!(this instanceof r))return new r(e,t);s.call(this,e.__mapKeysData__,e),t&&u[t]||(t="key+value"),c(this,{__kind__:o("",t),__values__:o("w",e.__mapValuesData__)})},i&&i(r,s),r.prototype=Object.create(s.prototype,{constructor:o(r),_resolve:o(function(e){return"value"===this.__kind__?this.__values__[e]:"key"===this.__kind__?this.__list__[e]:[this.__list__[e],this.__values__[e]]}),_unBind:o(function(){this.__values__=null,l.call(this)}),toString:o(function(){return"[object Map Iterator]"})}),Object.defineProperty(r.prototype,a,o("c","Map Iterator"))},function(e,t,n){"use strict";e.exports=n(130)("key","value","key+value")},function(e,t,n){"use strict";var r=Array.prototype.forEach,i=Object.create;e.exports=function(e){var t=i(null);return r.call(arguments,function(e){t[e]=!0}),t}},function(e,t,n){"use strict";e.exports=function(){return"undefined"!=typeof Map&&"[object Map]"===Object.prototype.toString.call(new Map)}()},function(e,t,n){function r(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function i(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}var o=n(133);e.exports=o(r),e.exports.strict=o(i),r.proto=r(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return r(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return i(this)},configurable:!0})})},function(e,t){function n(e,t){function r(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];var r=e.apply(this,t),i=t[t.length-1];return"function"==typeof r&&r!==i&&Object.keys(i).forEach(function(e){r[e]=i[e]}),r}if(e&&t)return n(e)(t);if("function"!=typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(t){r[t]=e[t]}),r}e.exports=n},function(e,t,n){"use strict";t.parser=n(135),t.generate=n(141),t.writeToStream=n(48)},function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState()}var i=n(136),o=n(5),s=n(9).EventEmitter,a=n(140),u=n(47);o(r,s),r.prototype._resetState=function(){this.packet=new a,this.error=null,this._list=i(),this._stateCounter=0},r.prototype.parse=function(e){for(this.error&&this._resetState(),this._list.append(e);(-1!==this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)++this._stateCounter>=this._states.length&&(this._stateCounter=0);return this._list.length},r.prototype._parseHeader=function(){var e=this._list.readUInt8(0);return this.packet.cmd=u.types[e>>u.CMD_SHIFT],this.packet.retain=0!=(e&u.RETAIN_MASK),this.packet.qos=e>>u.QOS_SHIFT&u.QOS_MASK,this.packet.dup=0!=(e&u.DUP_MASK),this._list.consume(1),!0},r.prototype._parseLength=function(){for(var e,t=0,n=1,r=0,i=!0;t<5&&(e=this._list.readUInt8(t++),r+=n*(e&u.LENGTH_MASK),n*=128,0!=(e&u.LENGTH_FIN_MASK));)if(this._list.length<=t){i=!1;break}return i&&(this.packet.length=r,this._list.consume(t)),i},r.prototype._parsePayload=function(){var e=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseMessageId();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":case"disconnect":break;default:this._emitError(new Error("Not supported"))}e=!0}return e},r.prototype._parseConnect=function(){var e,t,n,r,i,o,s={},a=this.packet;if(null===(e=this._parseString()))return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==e&&"MQIsdp"!==e)return this._emitError(new Error("Invalid protocolId"));if(a.protocolId=e,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(a.protocolVersion=this._list.readUInt8(this._pos),3!==a.protocolVersion&&4!==a.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(++this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(s.username=this._list.readUInt8(this._pos)&u.USERNAME_MASK,s.password=this._list.readUInt8(this._pos)&u.PASSWORD_MASK,s.will=this._list.readUInt8(this._pos)&u.WILL_FLAG_MASK,s.will&&(a.will={},a.will.retain=0!=(this._list.readUInt8(this._pos)&u.WILL_RETAIN_MASK),a.will.qos=(this._list.readUInt8(this._pos)&u.WILL_QOS_MASK)>>u.WILL_QOS_SHIFT),a.clean=0!=(this._list.readUInt8(this._pos)&u.CLEAN_SESSION_MASK),this._pos++,a.keepalive=this._parseNum(),-1===a.keepalive)return this._emitError(new Error("Packet too short"));if(null===(t=this._parseString()))return this._emitError(new Error("Packet too short"));if(a.clientId=t,s.will){if(null===(n=this._parseString()))return this._emitError(new Error("Cannot parse will topic"));if(a.will.topic=n,null===(r=this._parseBuffer()))return this._emitError(new Error("Cannot parse will payload"));a.will.payload=r}if(s.username){if(null===(o=this._parseString()))return this._emitError(new Error("Cannot parse username"));a.username=o}if(s.password){if(null===(i=this._parseBuffer()))return this._emitError(new Error("Cannot parse password"));a.password=i}return a},r.prototype._parseConnack=function(){var e=this.packet;return this._list.length<2?null:(e.sessionPresent=!!(this._list.readUInt8(this._pos++)&u.SESSIONPRESENT_MASK),e.returnCode=this._list.readUInt8(this._pos),-1===e.returnCode?this._emitError(new Error("Cannot parse return code")):void 0)},r.prototype._parsePublish=function(){var e=this.packet;if(e.topic=this._parseString(),null===e.topic)return this._emitError(new Error("Cannot parse topic"));e.qos>0&&!this._parseMessageId()||(e.payload=this._list.slice(this._pos,e.length))},r.prototype._parseSubscribe=function(){var e,t,n=this.packet;if(1!==n.qos)return this._emitError(new Error("Wrong subscribe header"));if(n.subscriptions=[],this._parseMessageId())for(;this._pos<n.length;){if(null===(e=this._parseString()))return this._emitError(new Error("Cannot parse topic"));t=this._list.readUInt8(this._pos++),n.subscriptions.push({topic:e,qos:t})}},r.prototype._parseSuback=function(){if(this.packet.granted=[],this._parseMessageId())for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))},r.prototype._parseUnsubscribe=function(){var e=this.packet;if(e.unsubscriptions=[],this._parseMessageId())for(;this._pos<e.length;){var t;if(null===(t=this._parseString()))return this._emitError(new Error("Cannot parse topic"));e.unsubscriptions.push(t)}},r.prototype._parseUnsuback=function(){if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"))},r.prototype._parseMessageId=function(){var e=this.packet;return e.messageId=this._parseNum(),null!==e.messageId||(this._emitError(new Error("Cannot parse messageId")),!1)},r.prototype._parseString=function(e){var t,n=this._parseNum(),r=n+this._pos;return-1===n||r>this._list.length||r>this.packet.length?null:(t=this._list.toString("utf8",this._pos,r),this._pos+=n,t)},r.prototype._parseBuffer=function(){var e,t=this._parseNum(),n=t+this._pos;return-1===t||n>this._list.length||n>this.packet.length?null:(e=this._list.slice(this._pos,n),this._pos+=t,e)},r.prototype._parseNum=function(){if(this._list.length-this._pos<2)return-1;var e=this._list.readUInt16BE(this._pos);return this._pos+=2,e},r.prototype._newPacket=function(){return this.packet&&(this._list.consume(this.packet.length),this.emit("packet",this.packet)),this.packet=new a,!0},r.prototype._emitError=function(e){this.error=e,this.emit("error",e)},e.exports=r},function(e,t,n){function r(e){if(!(this instanceof r))return new r(e);if(this._bufs=[],this.length=0,"function"==typeof e){this._callback=e;var t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",function(e){e.on("error",t)}),this.on("unpipe",function(e){e.removeListener("error",t)})}else this.append(e);i.call(this)}var i=n(137),o=n(138),s=n(4).Buffer;o.inherits(r,i),r.prototype._offset=function(e){var t,n=0,r=0;if(0===e)return[0,0];for(;r<this._bufs.length;r++){if(t=n+this._bufs[r].length,e<t||r==this._bufs.length-1)return[r,e-n];n=t}},r.prototype.append=function(e){var t=0;if(s.isBuffer(e))this._appendBuffer(e);else if(Array.isArray(e))for(;t<e.length;t++)this.append(e[t]);else if(e instanceof r)for(;t<e._bufs.length;t++)this.append(e._bufs[t]);else null!=e&&("number"==typeof e&&(e=e.toString()),this._appendBuffer(s.from(e)));return this},r.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},r.prototype._write=function(e,t,n){this._appendBuffer(e),"function"==typeof n&&n()},r.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},r.prototype.end=function(e){i.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},r.prototype.get=function(e){return this.slice(e,e+1)[0]},r.prototype.slice=function(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},r.prototype.copy=function(e,t,n,r){if(("number"!=typeof n||n<0)&&(n=0),("number"!=typeof r||r>this.length)&&(r=this.length),n>=this.length)return e||s.alloc(0);if(r<=0)return e||s.alloc(0);var i,o,a=!!e,u=this._offset(n),c=r-n,l=c,f=a&&t||0,h=u[1];if(0===n&&r==this.length){if(!a)return 1===this._bufs.length?this._bufs[0]:s.concat(this._bufs,this.length);for(o=0;o<this._bufs.length;o++)this._bufs[o].copy(e,f),f+=this._bufs[o].length;return e}if(l<=this._bufs[u[0]].length-h)return a?this._bufs[u[0]].copy(e,t,h,h+l):this._bufs[u[0]].slice(h,h+l);for(a||(e=s.allocUnsafe(c)),o=u[0];o<this._bufs.length;o++){if(i=this._bufs[o].length-h,!(l>i)){this._bufs[o].copy(e,f,h,h+l);break}this._bufs[o].copy(e,f,h),f+=i,l-=i,h&&(h=0)}return e},r.prototype.shallowSlice=function(e,t){e=e||0,t=t||this.length,e<0&&(e+=this.length),t<0&&(t+=this.length);var n=this._offset(e),i=this._offset(t),o=this._bufs.slice(n[0],i[0]+1);return 0==i[1]?o.pop():o[o.length-1]=o[o.length-1].slice(0,i[1]),0!=n[1]&&(o[0]=o[0].slice(n[1])),new r(o)},r.prototype.toString=function(e,t,n){return this.slice(t,n).toString(e)},r.prototype.consume=function(e){for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},r.prototype.duplicate=function(){for(var e=0,t=new r;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},r.prototype.destroy=function(){this._bufs.length=0,this.length=0,this.push(null)},function(){var e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};for(var t in e)!function(t){r.prototype[t]=function(n){return this.slice(n,n+e[t])[t](0)}}(t)}(),e.exports=r},function(e,t,n){e.exports=n(10)},function(e,t,n){(function(e){function r(e,n){var r={seen:[],stylize:o};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&t._extend(r,n),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),a(r,e,r.depth)}function i(e,t){var n=r.styles[t];return n?"["+r.colors[n][0]+"m"+e+"["+r.colors[n][1]+"m":e}function o(e,t){return e}function s(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function a(e,n,r){if(e.customInspect&&n&&x(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return v(i)||(i=a(e,i,r)),i}var o=u(e,n);if(o)return o;var d=Object.keys(n),g=s(d);if(e.showHidden&&(d=Object.getOwnPropertyNames(n)),k(n)&&(d.indexOf("message")>=0||d.indexOf("description")>=0))return c(n);if(0===d.length){if(x(n)){var b=n.name?": "+n.name:"";return e.stylize("[Function"+b+"]","special")}if(w(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(E(n))return e.stylize(Date.prototype.toString.call(n),"date");if(k(n))return c(n)}var y="",m=!1,_=["{","}"];if(p(n)&&(m=!0,_=["[","]"]),x(n)){y=" [Function"+(n.name?": "+n.name:"")+"]"}if(w(n)&&(y=" "+RegExp.prototype.toString.call(n)),E(n)&&(y=" "+Date.prototype.toUTCString.call(n)),k(n)&&(y=" "+c(n)),0===d.length&&(!m||0==n.length))return _[0]+y+_[1];if(r<0)return w(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var S;return S=m?l(e,n,r,g,d):d.map(function(t){return f(e,n,r,g,t,m)}),e.seen.pop(),h(S,y,_)}function u(e,t){if(_(t))return e.stylize("undefined","undefined");if(v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):d(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,n,r,i){for(var o=[],s=0,a=t.length;s<a;++s)T(t,String(s))?o.push(f(e,t,n,r,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(f(e,t,n,r,i,!0))}),o}function f(e,t,n,r,i,o){var s,u,c;if(c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},c.get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),T(r,i)||(s="["+i+"]"),u||(e.seen.indexOf(c.value)<0?(u=g(n)?a(e,c.value,null):a(e,c.value,n-1),u.indexOf("\n")>-1&&(u=o?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),_(s)){if(o&&i.match(/^\d+$/))return u;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function h(e,t,n){var r=0;return e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function p(e){return Array.isArray(e)}function d(e){return"boolean"==typeof e}function g(e){return null===e}function b(e){return null==e}function y(e){return"number"==typeof e}function v(e){return"string"==typeof e}function m(e){return"symbol"==typeof e}function _(e){return void 0===e}function w(e){return S(e)&&"[object RegExp]"===I(e)}function S(e){return"object"==typeof e&&null!==e}function E(e){return S(e)&&"[object Date]"===I(e)}function k(e){return S(e)&&("[object Error]"===I(e)||e instanceof Error)}function x(e){return"function"==typeof e}function O(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function I(e){return Object.prototype.toString.call(e)}function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function A(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}function P(t){function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};t.apply(this,n).then(function(t){e.nextTick(s,null,t)},function(t){e.nextTick(A,t,s)})}if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,C(t)),n}var C=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},j=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(r(arguments[n]));return t.join(" ")}for(var n=1,i=arguments,o=i.length,s=String(e).replace(j,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(e){return"[Circular]"}default:return e}}),a=i[n];n<o;a=i[++n])g(a)||!S(a)?s+=" "+a:s+=" "+r(a);return s},t.deprecate=function(n,r){function i(){if(!o){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation,o=!0}return n.apply(this,arguments)}if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var o=!1;return i};var R,M={};t.debuglog=function(n){if(_(R)&&(R=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!M[n])if(new RegExp("\\b"+n+"\\b","i").test(R)){e.pid;M[n]=function(){t.format.apply(t,arguments)}}else M[n]=function(){};return M[n]},t.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=d,t.isNull=g,t.isNullOrUndefined=b,t.isNumber=y,t.isString=v,t.isSymbol=m,t.isUndefined=_,t.isRegExp=w,t.isObject=S,t.isDate=E,t.isError=k,t.isFunction=x,t.isPrimitive=O,t.isBuffer=n(139);t.log=function(){},t.inherits=n(5),t._extend=function(e,t){if(!t||!S(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var N="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;t.promisify=function(e){function t(){for(var t,n,r=new Promise(function(e,r){t=e,n=r}),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push(function(e,r){e?n(e):t(r)});try{e.apply(this,i)}catch(e){n(e)}return r}if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(N&&e[N]){var t=e[N];if("function"!=typeof t)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,N,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),N&&Object.defineProperty(t,N,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,C(e))},t.promisify.custom=N,t.callbackify=P}).call(t,n(0))},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){function n(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}e.exports=n},function(e,t,n){"use strict";function r(e){var t=new i;return s(e,t),t.concat()}function i(){this._array=new Array(20),this._i=0}var o=n(4).Buffer,s=n(48),a=n(9).EventEmitter;n(5)(i,a),i.prototype.write=function(e){return this._array[this._i++]=e,!0},i.prototype.concat=function(){var e,t,n=0,r=new Array(this._array.length),i=this._array,s=0;for(e=0;e<i.length&&void 0!==i[e];e++)"string"!=typeof i[e]?r[e]=i[e].length:r[e]=o.byteLength(i[e]),n+=r[e];for(t=o.allocUnsafe(n),e=0;e<i.length&&void 0!==i[e];e++)"string"!=typeof i[e]?(i[e].copy(t,s),s+=r[e]):(t.write(i[e],s),s+=r[e]);return t},e.exports=r},function(e,t,n){"use strict";function r(e){var t=o.allocUnsafe(2);return t.writeUInt8(e>>8,0),t.writeUInt8(255&e,1),t}function i(){for(var e=0;e<s;e++)a[e]=r(e)}var o=n(4).Buffer,s=65536,a={};e.exports={cache:a,generateCache:i,generateNumber:r}},function(e,t,n){"use strict";function r(e,t,n){var r=this;this._callback=e,this._args=n,this._interval=setInterval(e,t,this._args),this.reschedule=function(e){e||(e=r._interval),r._interval&&clearInterval(r._interval),r._interval=setInterval(r._callback,e,r._args)},this.clear=function(){r._interval&&(clearInterval(r._interval),r._interval=void 0)},this.destroy=function(){r._interval&&clearInterval(r._interval),r._callback=void 0,r._interval=void 0,r._args=void 0}}function i(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("interval needed");var e;if(arguments.length>0){e=new Array(arguments.length-2);for(var t=0;t<e.length;t++)e[t]=arguments[t+2]}return new r(arguments[0],arguments[1],e)}e.exports=i},function(e,t,n){"use strict";function r(e){for(var t=e.split("/"),n=0;n<t.length;n++)if("+"!==t[n]){if("#"===t[n])return n===t.length-1;if(-1!==t[n].indexOf("+")||-1!==t[n].indexOf("#"))return!1}return!0}function i(e){if(0===e.length)return"empty_topic_list";for(var t=0;t<e.length;t++)if(!r(e[t]))return e[t];return null}e.exports={validateTopics:i}},function(e,t,n){(function(e,r){var i;!function(o){function s(e){throw new RangeError(j[e])}function a(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function u(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(C,"."),r+a(e.split("."),t).join(".")}function c(e){for(var t,n,r=[],i=0,o=e.length;i<o;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<o?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--)):r.push(t);return r}function l(e){return a(e,function(e){var t="";return e>65535&&(e-=65536,t+=N(e>>>10&1023|55296),e=56320|1023&e),t+=N(e)}).join("")}function f(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:w}function h(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function p(e,t,n){var r=0;for(e=n?M(e/x):e>>1,e+=M(e/t);e>R*E>>1;r+=w)e=M(e/R);return M(r+(R+1)*e/(e+k))}function d(e){var t,n,r,i,o,a,u,c,h,d,g=[],b=e.length,y=0,v=I,m=O;for(n=e.lastIndexOf(T),n<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&s("not-basic"),g.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<b;){for(o=y,a=1,u=w;i>=b&&s("invalid-input"),c=f(e.charCodeAt(i++)),(c>=w||c>M((_-y)/a))&&s("overflow"),y+=c*a,h=u<=m?S:u>=m+E?E:u-m,!(c<h);u+=w)d=w-h,a>M(_/d)&&s("overflow"),a*=d;t=g.length+1,m=p(y-o,t,0==o),M(y/t)>_-v&&s("overflow"),v+=M(y/t),y%=t,g.splice(y++,0,v)}return l(g)}function g(e){var t,n,r,i,o,a,u,l,f,d,g,b,y,v,m,k=[];for(e=c(e),b=e.length,t=I,n=0,o=O,a=0;a<b;++a)(g=e[a])<128&&k.push(N(g));for(r=i=k.length,i&&k.push(T);r<b;){for(u=_,a=0;a<b;++a)(g=e[a])>=t&&g<u&&(u=g);for(y=r+1,u-t>M((_-n)/y)&&s("overflow"),n+=(u-t)*y,t=u,a=0;a<b;++a)if(g=e[a],g<t&&++n>_&&s("overflow"),g==t){for(l=n,f=w;d=f<=o?S:f>=o+E?E:f-o,!(l<d);f+=w)m=l-d,v=w-d,k.push(N(h(d+m%v,0))),l=M(m/v);k.push(N(h(l,0))),o=p(n,y,r==i),n=0,++r}++n,++t}return k.join("")}function b(e){return u(e,function(e){return A.test(e)?d(e.slice(4).toLowerCase()):e})}function y(e){return u(e,function(e){return P.test(e)?"xn--"+g(e):e})}var v=("object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType,"object"==typeof r&&r);var m,_=2147483647,w=36,S=1,E=26,k=38,x=700,O=72,I=128,T="-",A=/^xn--/,P=/[^\x20-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,j={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=w-S,M=Math.floor,N=String.fromCharCode;m={version:"1.4.1",ucs2:{decode:c,encode:l},decode:d,encode:g,toASCII:y,toUnicode:b},void 0!==(i=function(){return m}.call(t,n,t,e))&&(e.exports=i)}()}).call(t,n(50)(e),n(3))},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(148),t.encode=t.stringify=n(149)},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var f,h,p,d,g=e[l].replace(a,"%20"),b=g.indexOf(n);b>=0?(f=g.substr(0,b),h=g.substr(b+1)):(f=g,h=""),p=decodeURIComponent(f),d=decodeURIComponent(h),r(s,p)?i(s[p])?s[p].push(d):s[p]=[s[p],d]:s[p]=d}return s};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,a){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?r(s(e),function(s){var a=encodeURIComponent(i(s))+n;return o(e[s])?r(e[s],function(e){return a+encodeURIComponent(i(e))}).join(t):a+encodeURIComponent(i(e[s]))}).join(t):a?encodeURIComponent(i(a))+n+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t){},function(e,t){},function(e,t,n){(function(t,r){var i=n(14),o=n(46),s=n(5),a=n(153),u=t.from&&t.from!==Uint8Array.from?t.from([0]):new t([0]),c=function(e,t){e._corked?e.once("uncork",t):t()},l=function(e,t){e._autoDestroy&&e.destroy(t)},f=function(e,t){return function(n){n?l(e,"premature close"===n.message?null:n):t&&!e._ended&&e.end()}},h=function(e,t){return e?e._writableState&&e._writableState.finished?t():e._writableState?e.end(t):(e.end(),void t()):t()},p=function(e){return new i.Readable({objectMode:!0,highWaterMark:16}).wrap(e)},d=function(e,t,n){if(!(this instanceof d))return new d(e,t,n);i.Duplex.call(this,n),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!n||!1!==n.autoDestroy,this._forwardDestroy=!n||!1!==n.destroy,this._forwardEnd=!n||!1!==n.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,e&&this.setWritable(e),t&&this.setReadable(t)};s(d,i.Duplex),d.obj=function(e,t,n){return n||(n={}),n.objectMode=!0,n.highWaterMark=16,new d(e,t,n)},d.prototype.cork=function(){1==++this._corked&&this.emit("cork")},d.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},d.prototype.setWritable=function(e){if(this._unwrite&&this._unwrite(),this.destroyed)return void(e&&e.destroy&&e.destroy());if(null===e||!1===e)return void this.end();var t=this,n=o(e,{writable:!0,readable:!1},f(this,this._forwardEnd)),i=function(){var e=t._ondrain;t._ondrain=null,e&&e()},s=function(){t._writable.removeListener("drain",i),n()};this._unwrite&&r.nextTick(i),this._writable=e,this._writable.on("drain",i),this._unwrite=s,this.uncork()},d.prototype.setReadable=function(e){if(this._unread&&this._unread(),this.destroyed)return void(e&&e.destroy&&e.destroy());if(null===e||!1===e)return this.push(null),void this.resume();var t=this,n=o(e,{writable:!1,readable:!0},f(this)),r=function(){t._forward()},i=function(){t.push(null)},s=function(){t._readable2.removeListener("readable",r),t._readable2.removeListener("end",i),n()};this._drained=!0,this._readable=e,this._readable2=e._readableState?e:p(e),this._readable2.on("readable",r),this._readable2.on("end",i),this._unread=s,this._forward()},d.prototype._read=function(){this._drained=!0,this._forward()},d.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){this._forwarding=!0;for(var e;this._drained&&null!==(e=a(this._readable2));)this.destroyed||(this._drained=this.push(e));this._forwarding=!1}},d.prototype.destroy=function(e){if(!this.destroyed){this.destroyed=!0;var t=this;r.nextTick(function(){t._destroy(e)})}},d.prototype._destroy=function(e){if(e){var t=this._ondrain;this._ondrain=null,t?t(e):this.emit("error",e)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},d.prototype._write=function(e,t,n){return this.destroyed?n():this._corked?c(this,this._write.bind(this,e,t,n)):e===u?this._finish(n):this._writable?void(!1===this._writable.write(e)?this._ondrain=n:n()):n()},d.prototype._finish=function(e){var t=this;this.emit("preend"),c(this,function(){h(t._forwardEnd&&t._writable,function(){!1===t._writableState.prefinished&&(t._writableState.prefinished=!0),t.emit("prefinish"),c(t,e)})})},d.prototype.end=function(e,t,n){return"function"==typeof e?this.end(null,null,e):"function"==typeof t?this.end(e,null,t):(this._ended=!0,e&&this.write(e),this._writableState.ending||this.write(u),i.Writable.prototype.end.call(this,n))},e.exports=d}).call(t,n(22).Buffer,n(0))},function(e,t){function n(e){var t=e._readableState;return t?t.objectMode?e.read():e.read(r(t)):null}function r(e){return e.buffer.length?e.buffer.head?e.buffer.head.data.length:e.buffer[0].length:e.length}e.exports=n},function(e,t){var n=null;"undefined"!=typeof WebSocket?n=WebSocket:"undefined"!=typeof MozWebSocket?n=MozWebSocket:"undefined"!=typeof window&&(n=window.WebSocket||window.MozWebSocket),e.exports=n},function(e,t){!function(t,n){var r={version:"2.7.1",areas:{},apis:{},inherit:function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n]);return t},stringify:function(e){return void 0===e||"function"==typeof e?e+"":JSON.stringify(e)},parse:function(e){try{return JSON.parse(e)}catch(t){return e}},fn:function(e,t){r.storeAPI[e]=t;for(var n in r.apis)r.apis[n][e]=t},get:function(e,t){return e.getItem(t)},set:function(e,t,n){e.setItem(t,n)},remove:function(e,t){e.removeItem(t)},key:function(e,t){return e.key(t)},length:function(e){return e.length},clear:function(e){e.clear()},Store:function(e,t,n){var i=r.inherit(r.storeAPI,function(e,t,n){return 0===arguments.length?i.getAll():"function"==typeof t?i.transact(e,t,n):void 0!==t?i.set(e,t,n):"string"==typeof e||"number"==typeof e?i.get(e):e?i.setAll(e,t):i.clear()});i._id=e;try{t.setItem("_-bad-_","wolf"),i._area=t,t.removeItem("_-bad-_")}catch(e){}return i._area||(i._area=r.inherit(r.storageAPI,{items:{},name:"fake"})),i._ns=n||"",r.areas[e]||(r.areas[e]=i._area),r.apis[i._ns+i._id]||(r.apis[i._ns+i._id]=i),i},storeAPI:{area:function(e,t){var n=this[e];return n&&n.area||(n=r.Store(e,t,this._ns),this[e]||(this[e]=n)),n},namespace:function(e,t){if(!e)return this._ns?this._ns.substring(0,this._ns.length-1):"";var n=e,i=this[n];return i&&i.namespace||(i=r.Store(this._id,this._area,this._ns+n+"."),this[n]||(this[n]=i),t||i.area("session",r.areas.session)),i},isFake:function(){return"fake"===this._area.name},toString:function(){return"store"+(this._ns?"."+this.namespace():"")+"["+this._id+"]"},has:function(e){return this._area.has?this._area.has(this._in(e)):!!(this._in(e)in this._area)},size:function(){return this.keys().length},each:function(e,t){for(var n=0,i=r.length(this._area);n<i;n++){var o=this._out(r.key(this._area,n));if(void 0!==o&&!1===e.call(this,o,t||this.get(o)))break;i>r.length(this._area)&&(i--,n--)}return t||this},keys:function(e){return this.each(function(e,t){t.push(e)},e||[])},get:function(e,t){var n=r.get(this._area,this._in(e));return null!==n?r.parse(n):t||n},getAll:function(e){return this.each(function(e,t){t[e]=this.get(e)},e||{})},transact:function(e,t,n){var r=this.get(e,n),i=t(r);return this.set(e,void 0===i?r:i),this},set:function(e,t,n){var i=this.get(e);return null!=i&&!1===n?t:r.set(this._area,this._in(e),r.stringify(t),n)||i},setAll:function(e,t){var n,r;for(var i in e)r=e[i],this.set(i,r,t)!==r&&(n=!0);return n},add:function(e,t){var n=this.get(e);if(n instanceof Array)t=n.concat(t);else if(null!==n){var i=typeof n;if(i===typeof t&&"object"===i){for(var o in t)n[o]=t[o];t=n}else t=n+t}return r.set(this._area,this._in(e),r.stringify(t)),t},remove:function(e){var t=this.get(e);return r.remove(this._area,this._in(e)),t},clear:function(){return this._ns?this.each(function(e){r.remove(this._area,this._in(e))},1):r.clear(this._area),this},clearAll:function(){var e=this._area;for(var t in r.areas)r.areas.hasOwnProperty(t)&&(this._area=r.areas[t],this.clear());return this._area=e,this},_in:function(e){return"string"!=typeof e&&(e=r.stringify(e)),this._ns?this._ns+e:e},_out:function(e){return this._ns?e&&0===e.indexOf(this._ns)?e.substring(this._ns.length):void 0:e}},storageAPI:{length:0,has:function(e){return this.items.hasOwnProperty(e)},key:function(e){var t=0;for(var n in this.items)if(this.has(n)&&e===t++)return n},setItem:function(e,t){this.has(e)||this.length++,this.items[e]=t},removeItem:function(e){this.has(e)&&(delete this.items[e],this.length--)},getItem:function(e){return this.has(e)?this.items[e]:null},clear:function(){for(var e in this.items)this.removeItem(e)},toString:function(){return this.length+" items in "+this.name+"Storage"}}},i=r.Store("local",function(){try{return localStorage}catch(e){}}());i.local=i,i._=r,i.area("session",function(){try{return sessionStorage}catch(e){}}()),"function"==typeof n&&void 0!==n.amd?n("store2",[],function(){return i}):void 0!==e&&e.exports?e.exports=i:(t.store&&(r.conflict=t.store),t.store=i)}(this,this&&this.define)},function(e,t,n){(function(e,r){var i;(function(){"use strict";function o(e){return e=String(e),e.charAt(0).toUpperCase()+e.slice(1)}function s(e,t,n){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&n&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(r=r[/[\d.]+$/.exec(e)])&&(e="Windows "+r),e=String(e),t&&n&&(e=e.replace(RegExp(t,"i"),n)),e=u(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}function a(e,t){var n=-1,r=e?e.length:0;if("number"==typeof r&&r>-1&&r<=w)for(;++n<r;)t(e[n],n,e);else c(e,t)}function u(e){return e=d(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:o(e)}function c(e,t){for(var n in e)k.call(e,n)&&t(e[n],n,e)}function l(e){return null==e?o(e):x.call(e).slice(8,-1)}function f(e,t){var n=null!=e?typeof e[t]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(n)||"object"==n&&!e[t])}function h(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function p(e,t){var n=null;return a(e,function(r,i){n=t(n,r,i,e)}),n}function d(e){return String(e).replace(/^ +| +$/g,"")}function g(e){function t(t){return p(t,function(t,n){var r=n.pattern||h(n);return!t&&(t=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(e)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),n=n.label||n,t=u(t[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),t})}function n(){return this.description||""}var r=y,i=e&&"object"==typeof e&&"String"!=l(e);i&&(r=e,e=null);var o=r.navigator||{},a=o.userAgent||"";e||(e=a);var b,v,m=i?!!o.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(x.toString()),_=i?"Object":"ScriptBridgingProxyObject",w=i?"Object":"Environment",E=i&&r.java?"JavaPackage":l(r.java),k=i?"Object":"RuntimeObject",O=/\bJava/.test(E)&&r.java,I=O&&l(r.environment)==w,T=O?"a":"",A=O?"b":"",P=r.document||{},C=r.operamini||r.opera,j=S.test(j=i&&C?C["[[Class]]"]:l(C))?j:C=null,R=e,M=[],N=null,U=e==a,L=U&&C&&"function"==typeof C.version&&C.version(),D=function(t){return p(t,function(t,n){return t||RegExp("\\b"+(n.pattern||h(n))+"\\b","i").exec(e)&&(n.label||n)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),B=function(t){return p(t,function(t,n){return t||RegExp("\\b"+(n.pattern||h(n))+"\\b","i").exec(e)&&(n.label||n)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),q=t([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),W=function(t){return p(t,function(t,n,r){return t||(n[q]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(q)]||RegExp("\\b"+h(r)+"(?:\\b|\\w*\\d)","i").exec(e))&&r})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),K=function(t){return p(t,function(t,n){var r=n.pattern||h(n);return!t&&(t=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=s(t,r,n.label||n)),t})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if(D&&(D=[D]),W&&!q&&(q=t([W])),(b=/\bGoogle TV\b/.exec(q))&&(q=b[0]),/\bSimulator\b/i.test(e)&&(q=(q?q+" ":"")+"Simulator"),"Opera Mini"==B&&/\bOPiOS\b/.test(e)&&M.push("running in Turbo/Uncompressed mode"),"IE"==B&&/\blike iPhone OS\b/.test(e)?(b=g(e.replace(/like iPhone OS/,"")),W=b.manufacturer,q=b.product):/^iP/.test(q)?(B||(B="Safari"),K="iOS"+((b=/ OS ([\d_]+)/i.exec(e))?" "+b[1].replace(/_/g,"."):"")):"Konqueror"!=B||/buntu/i.test(K)?W&&"Google"!=W&&(/Chrome/.test(B)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(q))||/\bAndroid\b/.test(K)&&/^Chrome/.test(B)&&/\bVersion\//i.test(e)?(B="Android Browser",K=/\bAndroid\b/.test(K)?K:"Android"):"Silk"==B?(/\bMobi/i.test(e)||(K="Android",M.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&M.unshift("accelerated")):"PaleMoon"==B&&(b=/\bFirefox\/([\d.]+)\b/.exec(e))?M.push("identifying as Firefox "+b[1]):"Firefox"==B&&(b=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(K||(K="Firefox OS"),q||(q=b[1])):!B||(b=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(B))?(B&&!q&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(b+"/")+8))&&(B=null),(b=q||W||K)&&(q||W||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(K))&&(B=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(K)?K:b)+" Browser")):"Electron"==B&&(b=(/\bChrome\/([\d.]+)\b/.exec(e)||0)[1])&&M.push("Chromium "+b):K="Kubuntu",L||(L=function(t){return p(t,function(t,n){return t||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null})}(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",h(B),"(?:Firefox|Minefield|NetFront)"])),(b="iCab"==D&&parseFloat(L)>3&&"WebKit"||/\bOpera\b/.test(B)&&(/\bOPR\b/.test(e)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(D)&&"WebKit"||!D&&/\bMSIE\b/i.test(e)&&("Mac OS"==K?"Tasman":"Trident")||"WebKit"==D&&/\bPlayStation\b(?! Vita\b)/i.test(B)&&"NetFront")&&(D=[b]),"IE"==B&&(b=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(B+=" Mobile",K="Windows Phone "+(/\+$/.test(b)?b:b+".x"),M.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(B="IE Mobile",K="Windows Phone 8.x",M.unshift("desktop mode"),L||(L=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=B&&"Trident"==D&&(b=/\brv:([\d.]+)/.exec(e))&&(B&&M.push("identifying as "+B+(L?" "+L:"")),B="IE",L=b[1]),U){if(f(r,"global"))if(O&&(b=O.lang.System,R=b.getProperty("os.arch"),K=K||b.getProperty("os.name")+" "+b.getProperty("os.version")),I){try{L=r.require("ringo/engine").version.join("."),B="RingoJS"}catch(e){(b=r.system)&&b.global.system==r.system&&(B="Narwhal",K||(K=b[0].os||null))}B||(B="Rhino")}else"object"==typeof r.process&&!r.process.browser&&(b=r.process)&&("object"==typeof b.versions&&("string"==typeof b.versions.electron?(M.push("Node "+b.versions.node),B="Electron",L=b.versions.electron):"string"==typeof b.versions.nw&&(M.push("Chromium "+L,"Node "+b.versions.node),B="NW.js",L=b.versions.nw)),B||(B="Node.js",R=b.arch,K=b.platform,L=/[\d.]+/.exec(b.version),L=L?L[0]:null));else l(b=r.runtime)==_?(B="Adobe AIR",K=b.flash.system.Capabilities.os):l(b=r.phantom)==k?(B="PhantomJS",L=(b=b.version||null)&&b.major+"."+b.minor+"."+b.patch):"number"==typeof P.documentMode&&(b=/\bTrident\/(\d+)/i.exec(e))?(L=[L,P.documentMode],(b=+b[1]+4)!=L[1]&&(M.push("IE "+L[1]+" mode"),D&&(D[1]=""),L[1]=b),L="IE"==B?String(L[1].toFixed(1)):L[0]):"number"==typeof P.documentMode&&/^(?:Chrome|Firefox)\b/.test(B)&&(M.push("masking as "+B+" "+L),B="IE",L="11.0",D=["Trident"],K="Windows");K=K&&u(K)}if(L&&(b=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(L)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(U&&o.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(N=/b/i.test(b)?"beta":"alpha",L=L.replace(RegExp(b+"\\+?$"),"")+("beta"==N?A:T)+(/\d+\+?/.exec(b)||"")),"Fennec"==B||"Firefox"==B&&/\b(?:Android|Firefox OS)\b/.test(K))B="Firefox Mobile";else if("Maxthon"==B&&L)L=L.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(q))"Xbox 360"==q&&(K=null),"Xbox 360"==q&&/\bIEMobile\b/.test(e)&&M.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(B)&&(!B||q||/Browser|Mobi/.test(B))||"Windows CE"!=K&&!/Mobi/i.test(e))if("IE"==B&&U)try{null===r.external&&M.unshift("platform preview")}catch(e){M.unshift("embedded")}else(/\bBlackBerry\b/.test(q)||/\bBB10\b/.test(e))&&(b=(RegExp(q.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||L)?(b=[b,/BB10/.test(e)],K=(b[1]?(q=null,W="BlackBerry"):"Device Software")+" "+b[0],L=null):this!=c&&"Wii"!=q&&(U&&C||/Opera/.test(B)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==B&&/\bOS X (?:\d+\.){2,}/.test(K)||"IE"==B&&(K&&!/^Win/.test(K)&&L>5.5||/\bWindows XP\b/.test(K)&&L>8||8==L&&!/\bTrident\b/.test(e)))&&!S.test(b=g.call(c,e.replace(S,"")+";"))&&b.name&&(b="ing as "+b.name+((b=b.version)?" "+b:""),S.test(B)?(/\bIE\b/.test(b)&&"Mac OS"==K&&(K=null),b="identify"+b):(b="mask"+b,B=j?u(j.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(b)&&(K=null),U||(L=null)),D=["Presto"],M.push(b));else B+=" Mobile";(b=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(b=[parseFloat(b.replace(/\.(\d)$/,".0$1")),b],"Safari"==B&&"+"==b[1].slice(-1)?(B="WebKit Nightly",N="alpha",L=b[1].slice(0,-1)):L!=b[1]&&L!=(b[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(L=null),b[1]=(/\bChrome\/([\d.]+)/i.exec(e)||0)[1],537.36==b[0]&&537.36==b[2]&&parseFloat(b[1])>=28&&"WebKit"==D&&(D=["Blink"]),U&&(m||b[1])?(D&&(D[1]="like Chrome"),b=b[1]||(b=b[0],b<530?1:b<532?2:b<532.05?3:b<533?4:b<534.03?5:b<534.07?6:b<534.1?7:b<534.13?8:b<534.16?9:b<534.24?10:b<534.3?11:b<535.01?12:b<535.02?"13+":b<535.07?15:b<535.11?16:b<535.19?17:b<536.05?18:b<536.1?19:b<537.01?20:b<537.11?"21+":b<537.13?23:b<537.18?24:b<537.24?25:b<537.36?26:"Blink"!=D?"27":"28")):(D&&(D[1]="like Safari"),b=b[0],b=b<400?1:b<500?2:b<526?3:b<533?4:b<534?"4+":b<535?5:b<537?6:b<538?7:b<601?8:"8"),D&&(D[1]+=" "+(b+="number"==typeof b?".x":/[.+]/.test(b)?"":"+")),"Safari"==B&&(!L||parseInt(L)>45)&&(L=b)),"Opera"==B&&(b=/\bzbov|zvav$/.exec(K))?(B+=" ",M.unshift("desktop mode"),"zvav"==b?(B+="Mini",L=null):B+="Mobile",K=K.replace(RegExp(" *"+b+"$"),"")):"Safari"==B&&/\bChrome\b/.exec(D&&D[1])&&(M.unshift("desktop mode"),B="Chrome Mobile",L=null,/\bOS X\b/.test(K)?(W="Apple",K="iOS 4.3+"):K=null),L&&0==L.indexOf(b=/[\d.]+$/.exec(K))&&e.indexOf("/"+b+"-")>-1&&(K=d(K.replace(b,""))),D&&!/\b(?:Avant|Nook)\b/.test(B)&&(/Browser|Lunascape|Maxthon/.test(B)||"Safari"!=B&&/^iOS/.test(K)&&/\bSafari\b/.test(D[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(B)&&D[1])&&(b=D[D.length-1])&&M.push(b),M.length&&(M=["("+M.join("; ")+")"]),W&&q&&q.indexOf(W)<0&&M.push("on "+W),q&&M.push((/^on /.test(M[M.length-1])?"":"on ")+q),K&&(b=/ ([\d.+]+)$/.exec(K),v=b&&"/"==K.charAt(K.length-b[0].length-1),K={architecture:32,family:b&&!v?K.replace(b[0],""):K,version:b?b[1]:null,toString:function(){var e=this.version;return this.family+(e&&!v?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(b=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(R))&&!/\bi686\b/i.test(R)?(K&&(K.architecture=64,K.family=K.family.replace(RegExp(" *"+b),"")),B&&(/\bWOW64\b/i.test(e)||U&&/\w(?:86|32)$/.test(o.cpuClass||o.platform)&&!/\bWin64; x64\b/i.test(e))&&M.unshift("32-bit")):K&&/^OS X/.test(K.family)&&"Chrome"==B&&parseFloat(L)>=39&&(K.architecture=64),e||(e=null);var F={};return F.description=e,F.layout=D&&D[0],F.manufacturer=W,F.name=B,F.prerelease=N,F.product=q,F.ua=e,F.version=B&&L,F.os=K||{architecture:null,family:null,version:null,toString:function(){return"null"}},F.parse=g,F.toString=n,F.version&&M.unshift(L),F.name&&M.unshift(B),K&&B&&(K!=String(K).split(" ")[0]||K!=B.split(" ")[0]&&!q)&&M.push(q?"("+K+")":"on "+K),M.length&&(F.description=M.join(" ")),F}var b={function:!0,object:!0},y=b[typeof window]&&window||this,v=b[typeof t]&&t,m=b[typeof e]&&e&&!e.nodeType&&e,_=v&&m&&"object"==typeof r&&r;!_||_.global!==_&&_.window!==_&&_.self!==_||(y=_);var w=Math.pow(2,53)-1,S=/\bOpera/,E=Object.prototype,k=E.hasOwnProperty,x=E.toString,O=g();y.platform=O,void 0!==(i=function(){return O}.call(t,n,t,e))&&(e.exports=i)}).call(this)}).call(t,n(50)(e),n(3))},function(e,t){e.exports={name:"chabokpush",version:"1.4.0",description:"Chabok Javascript client for browsers, React-Native, Web Workers & Node.js",main:"dist/chabokpush.min.js",homepage:"http://chabokpush.com/",scripts:{build:"webpack --env build","demo-build":"webpack --env demo && node ./development.js","dev-build":"webpack --env demo && NODE_ENV=staging node ./development.js",dev:"webpack --progress --colors --watch --env dev",pretest:"webpack --env build",test:"mocha --compilers js:babel-core/register --colors ./test/*.spec.js  -r ./test/setup.js","test:watch":"mocha --compilers js:babel-core/register --colors -w ./test/*.spec.js -r ./test/setup.js",release:"./release.sh"},repository:{type:"git",url:"https://github.com/chabokpush/chabok-client-js.git"},author:"ADP digital",license:"ISC",eslintConfig:{env:{browser:!0,node:!0},parserOptions:{ecmaVersion:6,sourceType:"module"},rules:{semi:2}},dependencies:{axios:"^0.17.1","es6-symbol":"^3.1.1","faye-websocket":"^0.11.1",mqtt:"^2.15.0",platform:"^1.3.4",shortid:"^2.2.8",store2:"^2.5.2"},devDependencies:{"babel-cli":"^6.26.0","babel-core":"^6.26.0","babel-eslint":"^8.0.3","babel-loader":"^7.1.2","babel-plugin-add-module-exports":"0.2.1","babel-preset-es2015":"6.24.1",chai:"^4.1.2","copy-webpack-plugin":"^4.3.0",eslint:"^4.13.1","eslint-loader":"^1.9.0","html-webpack-plugin":"^2.30.1",mocha:"^4.0.1",webpack:"^3.10.0",yargs:"^10.0.3"}}},function(e,t,n){"use strict";e.exports=n(159)},function(e,t,n){"use strict";function r(t){return a.seed(t),e.exports}function i(t){return l=t,e.exports}function o(e){return void 0!==e&&a.characters(e),a.shuffled()}function s(){return u(l)}var a=n(18),u=n(161),c=n(165),l=n(166)||0;e.exports=s,e.exports.generate=s,e.exports.seed=r,e.exports.worker=i,e.exports.characters=o,e.exports.isValid=c},function(e,t,n){"use strict";function r(){return(o=(9301*o+49297)%233280)/233280}function i(e){o=e}var o=1;e.exports={nextValue:r,seed:i}},function(e,t,n){"use strict";function r(e){var t="",n=Math.floor(.001*(Date.now()-a));return n===o?i++:(i=0,o=n),t+=s(u),t+=s(e),i>0&&(t+=s(i)),t+=s(n)}var i,o,s=n(162),a=(n(18),1459707606518),u=6;e.exports=r},function(e,t,n){"use strict";function r(e){for(var t,n=0,r="";!t;)r+=s(o,i.get(),1),t=e<Math.pow(16,n+1),n++;return r}var i=n(18),o=n(163),s=n(164);e.exports=r},function(e,t,n){"use strict";var r,i="object"==typeof window&&(window.crypto||window.msCrypto);r=i&&i.getRandomValues?function(e){return i.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],n=0;n<e;n++)t.push(Math.floor(256*Math.random()));return t},e.exports=r},function(e,t){e.exports=function(e,t,n){for(var r=(2<<Math.log(t.length-1)/Math.LN2)-1,i=Math.ceil(1.6*r*n/t.length),o="";;)for(var s=e(i),a=0;a<i;a++){var u=s[a]&r;if(t[u]&&(o+=t[u],o.length===n))return o}}},function(e,t,n){"use strict";function r(e){return!(!e||"string"!=typeof e||e.length<6)&&!new RegExp("[^"+i.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e)}var i=n(18);e.exports=r},function(e,t,n){"use strict";e.exports=0},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(9),u=n(55),c=null,l=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(!e)throw new Error("ServiceWorker config is not defined. Please provide serviceWorker config.");if(o.registerServiceWorker(e.path,e.scope),o.publicKey=n,c){var s;return s=c,i(o,s)}return c=o,o}return o(t,e),s(t,[{key:"initializeState",value:function(){var e=this;return"showNotification"in ServiceWorkerRegistration.prototype?"denied"===Notification.permission?void this.emit("tokenSubscription",null,"DENIED"):"PushManager"in window?"serviceWorker"in navigator?void navigator.serviceWorker.ready.then(function(t){t.pushManager.getSubscription().then(function(t){if(t)return void e.sendSubscriptionToServer(t);e.permissionGranted(e.publicKey)}).catch(function(t){var n=new Error(t&&t.message||"Error during getSubscription()");n.code=203,e.emit("tokenSubscription",n,"NOT_EXIST")})}):void this.emit("tokenSubscription",null,"NOT_SUPPORTED:SW"):void this.emit("tokenSubscription",null,"NOT_SUPPORTED:PM"):void this.emit("tokenSubscription",null,"NOT_SUPPORTED:SN")}},{key:"buildApplicationServerKey",value:function(e){var t=e,n=t.replace(/-/g,"+").replace(/_/g,"/"),r=atob(n).split("").map(function(e){return e.charCodeAt(0)});return new Uint8Array(r)}},{key:"sendSubscriptionToServer",value:function(e){if(e)try{this.emit("tokenSubscription",null,e.toJSON())}catch(e){var t=new Error(e&&e.message||"Cannot send push token to server");t.code=204,this.emit("tokenSubscription",t,"NOT_EXIST")}}},{key:"removeSubscriptionFromServer",value:function(e){}},{key:"registerServiceWorker",value:function(e,t){var n=this;"serviceWorker"in navigator?(e=e||"/ChabokSDKWorker.js",navigator.serviceWorker.register(e,{scope:t}).then(function(e){return n.initializeState(),navigator.serviceWorker.removeEventListener("message",n.serviceWorkerMessageHandler.bind(n)),navigator.serviceWorker.addEventListener("message",n.serviceWorkerMessageHandler.bind(n)),navigator.serviceWorker.ready}).catch(function(e){var t=new Error(e&&e.message||"ServiceWorker registration failed.");t.code=200,n.emit("tokenSubscription",t,"NOT_EXIST")})):this.emit("tokenSubscription",null,"NOT_SUPPORTED:SW")}},{key:"permissionGranted",value:function(e){var t=this;"serviceWorker"in navigator&&navigator.serviceWorker.ready?navigator.serviceWorker.ready.then(function(n){if(!n||!n.pushManager||!n.pushManager.subscribe)return void t.emit("tokenSubscription",null,"NOT_SUPPORTED:PM");n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t.buildApplicationServerKey(e)}).then(function(e){t.sendSubscriptionToServer(e)}).catch(function(e){var n=new Error(e&&e.message||"Unable to fetch push token from service worker");n.code=201,t.emit("tokenSubscription",n,"NOT_EXIST")})}):this.emit("tokenSubscription",null,"NOT_SUPPORTED:SW")}},{key:"serviceWorkerMessageHandler",value:function(e){if(e.data.payload&&e.data.command){var t=JSON.parse(e.data.payload),n=e.data.command.split(".");if("notification"===n[0]){if(!t.messageId||!t.actionTs||!t.actionType)return;var r={actionType:n[1],msgId:t.messageId,trackId:t.trackId,actionTs:t.actionTs,actionId:t.actionId};"SHOWN"===n[1]?t.notifDelivery&&this.emit("notificationAction",r):(this.emit("notificationAction",r),this.emit("notificationOpened",t));var i=JSON.parse(JSON.stringify(r));i.expire=Date.now()+432e5,u.setDirectInfluence(!0),u.updateStorage("influenceData",i)}else"notificationToken"===n[0]&&"update"===n[1]&&this.emit("notificationUpdateToken",t)}}},{key:"permissionDenied",value:function(){this.invalidateToken()}},{key:"requestToken",value:function(e){var t=this,n=e.publicKey;return"undefined"!=typeof Notification&&Notification&&(Notification.permission||Notification.requestPermission)?"denied"===Notification.permission?void this.permissionDenied():"default"===Notification.permission?void Notification.requestPermission().then(function(e){if("granted"!==e)return void t.permissionDenied();t.permissionGranted(n)}):void this.permissionGranted(n):void this.emit("tokenSubscription",null,"NOT_SUPPORTED:NOTIF")}},{key:"invalidateToken",value:function(){var e=this;return"serviceWorker"in navigator?navigator.serviceWorker.ready?void navigator.serviceWorker.ready.then(function(t){t.pushManager.getSubscription().then(function(t){if(!t){var n=new Error("Push token subscription is null");return n.code=201,void e.emit("tokenSubscription",n,"NOT_EXIST")}t.unsubscribe().then(function(){var t=new Error("Unsubscribe push token");t.code=202,e.emit("tokenSubscription",t,"NOT_EXIST")}).catch(function(t){var n=new Error(t&&t.message||"Unable to unsubscribe to messaging server.");n.code=202,e.emit("tokenSubscription",n,"NOT_EXIST")}),e.removeSubscriptionFromServer()}).catch(function(t){var n=new Error(t&&t.message||"Error during getSubscription");n.code=203,e.emit("tokenSubscription",n,"NOT_EXIST")})}):void this.emit("tokenSubscription",null,"NOT_SUPPORTED:SW_NOT_READY"):void this.emit("tokenSubscription",null,"NOT_SUPPORTED:SW")}}]),t}(a);t.default=l,e.exports=t.default}])});
//# sourceMappingURL=chabokpush.min.js.map